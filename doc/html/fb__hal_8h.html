<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FreeBusAVR: include/fb_hal.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>include/fb_hal.h File Reference</h1>  </div>
</div>
<div class="contents">

<p>Definitions on Hardware Abstration Layer.  
<a href="#_details">More...</a></p>
<code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="msg__queue_8h_source.html">msg_queue.h</a>&quot;</code><br/>
<!-- startSectionHeader --><div class="dynheader">
Include dependency graph for fb_hal.h:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__hal_8h__incl.png" border="0" usemap="#include_2fb__hal_8h" alt=""/></div>
<map name="include_2fb__hal_8h" id="include_2fb__hal_8h">
<area shape="rect" id="node7" href="msg__queue_8h.html" title="Definitions for the message queue system used for telegrams and communucation like debugging (also rs..." alt="" coords="235,83,344,112"/><area shape="rect" id="node9" href="fb__hardware_8h.html" title="Hardware specific options which includes the platforms (like ATmega8, ATmega168...)" alt="" coords="71,160,183,189"/><area shape="rect" id="node15" href="fb_8h.html" title="Define general values used in bus communication." alt="" coords="401,160,447,189"/></map>
<!-- endSectionContent --></div>
<!-- startSectionHeader --><div class="dynheader">
This graph shows which files directly or indirectly include this file:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__hal_8h__dep__incl.png" border="0" usemap="#include_2fb__hal_8hdep" alt=""/></div>
<map name="include_2fb__hal_8hdep" id="include_2fb__hal_8hdep">
<area shape="rect" id="node3" href="fb__adc_8c.html" title="Test program to use ADC to measure bus voltage The ADC return a 10&#45;bit value. Vin=(ADC * Vref) / 1024..." alt="" coords="5,83,107,112"/><area shape="rect" id="node5" href="fb__ain10v_8c.html" title="to use the 09609110.vd1 Analog&#45;Sensorschnittstelle 4&#45;fach at the moment only for 0&#45;10V !!..." alt="" coords="131,83,269,112"/><area shape="rect" id="node7" href="fb__2-dimmer__app_8c.html" title="Dimmer application based on the Gira 1032 2 channel dimmer." alt="" coords="293,83,536,112"/><area shape="rect" id="node9" href="fb__in8__app_8c.html" title="The application for 8 binary inputs Manufactorer code is 0x04 = Jung &#160;Device type (2118) 0x..." alt="" coords="560,83,717,112"/><area shape="rect" id="node11" href="fb__relais__app_8c.html" title="The relais application to switch 8 relais Manufactorer code is 0x04 = Jung &#160;Device type (2038..." alt="" coords="741,83,925,112"/><area shape="rect" id="node13" href="fb__eeprom_8c.html" title="The memory is divided into two parts. The complete size of the memory is tbd. &#160;0x00CE&#45;0x00DF: User me..." alt="" coords="949,83,1069,112"/><area shape="rect" id="node15" href="fb__hal_8c.html" title="Freebus Hardware Layer. Implementation of a software&#45; uart + timer handling This file consists of fun..." alt="" coords="1093,83,1181,112"/><area shape="rect" id="node17" href="fb__prot_8c.html" title="Handle all requests which are EIB bases like write current address or group address." alt="" coords="1205,83,1301,112"/><area shape="rect" id="node19" href="msg__queue_8c.html" title="Management of messagequeues." alt="" coords="1325,83,1451,112"/><area shape="rect" id="node21" href="fb__adc__lib_8c.html" title="library functions for ADC usage" alt="" coords="1475,83,1648,112"/><area shape="rect" id="node23" href="fb__i2c__lib_8c.html" title="library functions for I2C usage" alt="" coords="1672,83,1843,112"/><area shape="rect" id="node25" href="fb__ow__lib_8c.html" title="library functions for one&#45;wire usage via DS2482" alt="" coords="1867,83,2035,112"/><area shape="rect" id="node27" href="fb__ow__temp__lib_8c.html" title="library functions for DS18B20 usage" alt="" coords="2059,83,2269,112"/><area shape="rect" id="node29" href="fb__rtc__lib_8c.html" title="library functions for RTC DS1307 usage" alt="" coords="2293,83,2461,112"/></map>
<!-- endSectionContent --></div>

<p><a href="fb__hal_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#aa163a3608cbfcbcd50b1bd619cfd4508">HAL_EXT</a>&#160;&#160;&#160;extern</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set HAL_EXT to extern to make clear it is include from an external source like a lib.  <a href="#aa163a3608cbfcbcd50b1bd619cfd4508"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a529d90c5411df26d904a2fa1ea75f088">FB_FRAME_ERR</a>&#160;&#160;&#160;(1 &lt;&lt; 7)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Error error, e.g. stop bit is missing.  <a href="#a529d90c5411df26d904a2fa1ea75f088"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#ac16eee46dc37a0c4c35b6e3e40fa5637">FB_PARITY_ERR</a>&#160;&#160;&#160;(1 &lt;&lt; 6)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Parity error in octet.  <a href="#ac16eee46dc37a0c4c35b6e3e40fa5637"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#aa8e43e2058f1516200f5d701fb071ca8">FB_COLLISION</a>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Collision detected.  <a href="#aa8e43e2058f1516200f5d701fb071ca8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#af2d482f2d953338c0597858a0f7571b7">FB_CHAR_REC</a>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">In character receive mode.  <a href="#af2d482f2d953338c0597858a0f7571b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#ab26a4ae4e4ada896a31f54f982289c32">FB_BUS_FREE</a>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">EIB bus is free and messages can be send.  <a href="#ab26a4ae4e4ada896a31f54f982289c32"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a7bc94fd4a0297fc0e5901119a1221705">FB_ACK_REC</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">In acknowledge receive mode.  <a href="#a7bc94fd4a0297fc0e5901119a1221705"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#af3040cb5e83cff0109eeaa7317ba2d45">FB_MESSAGE</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Message type is a EIB message.  <a href="#af3040cb5e83cff0109eeaa7317ba2d45"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a29e413f6725b2ba32d165ffaa35b01e5">OFF</a>&#160;&#160;&#160;0U</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Global Define: OFF = 0.  <a href="#a29e413f6725b2ba32d165ffaa35b01e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#ad76d1750a6cdeebd506bfcd6752554d2">ON</a>&#160;&#160;&#160;1U</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Global Define: ON = 1.  <a href="#ad76d1750a6cdeebd506bfcd6752554d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a3c1a27aacf1dd33edffa2422da638d0f">IO_INPUT</a>&#160;&#160;&#160;0U</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Portpin-Direction is Input.  <a href="#a3c1a27aacf1dd33edffa2422da638d0f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#aae48313230e7f773bf495ada1171c506">IO_OUTPUT</a>&#160;&#160;&#160;1U</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Portpin-Direction is Output.  <a href="#aae48313230e7f773bf495ada1171c506"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a3a73bcf1a2e852ef3035725ff088a9e1">PANIC_MEMORY</a>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory error, is set when no memory is left and it is tried to allocate memory.  <a href="#a3a73bcf1a2e852ef3035725ff088a9e1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#aecc96d1e182add83fb6cda0b2319d418">PANIC_RESOURCE</a>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">No more resources are available.  <a href="#aecc96d1e182add83fb6cda0b2319d418"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#ac954f3924dbc5e5bff23d4be72aa9b67">PANIC_EEPROM</a>&#160;&#160;&#160;0x03</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Error in eeprom.  <a href="#ac954f3924dbc5e5bff23d4be72aa9b67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a0e1835b0358e59cc10ca44e68c4ad1d4">PANIC_NO_MSG</a>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">No more space for messages is left in allocated message queue.  <a href="#a0e1835b0358e59cc10ca44e68c4ad1d4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a46388d9db8422abfea56ae2323f7a77c">_NOP</a>()&#160;&#160;&#160;do { __asm__ __volatile__ (&quot;nop&quot;); } while (0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">define _NOP which calls assembler routine nop.  <a href="#a46388d9db8422abfea56ae2323f7a77c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAL_EXT uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#afa7a39eafe5190b954bac9e77ea52e2d">fbhal_checkProgTaster</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the programm button and set programming mode and switch LED depending on programming mode.  <a href="#afa7a39eafe5190b954bac9e77ea52e2d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAL_EXT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a89a6ed807cf111efb29a00f42e35cc3a">fbhal_Init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set input/output mode to PORTs, init timers and interrupts.  <a href="#a89a6ed807cf111efb29a00f42e35cc3a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAL_EXT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386">fb_send_ack</a> (uint8_t <a class="el" href="fb__ain10v_8c.html#a3f0c55f449560b03ce0ac43270c26600">value</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to set the ack value for the response to a telegram which must be send in a absolutly excat timing.  <a href="#a3e4f31f4b97d833e7ef5fb9615def386"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAL_EXT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a4111a79334fb10bc9c786f510256c20b">fb_hal_restart</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Restart the application by activating the watchdog and block the program.  <a href="#a4111a79334fb10bc9c786f510256c20b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAL_EXT uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#af70a4606fe5ce0777a371e0c6c3540fb">fb_hal_txqueue_msg</a> (struct <a class="el" href="structmsg.html">msg</a> *tx)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue message for sending.  <a href="#af70a4606fe5ce0777a371e0c6c3540fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b15ee32b7b560554e0f6d6945dde9d4"></a><!-- doxytag: member="fb_hal.h::sendTestTelegram" ref="a4b15ee32b7b560554e0f6d6945dde9d4" args="(void)" -->
HAL_EXT void&#160;</td><td class="memItemRight" valign="bottom"><b>sendTestTelegram</b> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAL_EXT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc">panic</a> (uint8_t reason)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Hold application and set blink code to PORTB pin 0, our prog pin and LED.  <a href="#a29aed42c30189a510295e50c98f34afc"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAL_EXT uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__hal_8h.html#a53ac9c8b9cfb94746b9f5b39bf152620">systemState</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the system state.  <a href="#a53ac9c8b9cfb94746b9f5b39bf152620"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Definitions on Hardware Abstration Layer. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Dirk Opfer, Matthias Fechner, Christian Bode </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Tue Jan 08 11:19:00 2008 </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a46388d9db8422abfea56ae2323f7a77c"></a><!-- doxytag: member="fb_hal.h::_NOP" ref="a46388d9db8422abfea56ae2323f7a77c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _NOP</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td>&#160;&#160;&#160;do { __asm__ __volatile__ (&quot;nop&quot;); } while (0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>define _NOP which calls assembler routine nop. </p>
<p>Can be used to wait some time and/or to prevent compiler from removing code in optimization (empty loops to wait etc.) </p>

<p>Referenced by <a class="el" href="fb__2-dimmer__app_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a7bc94fd4a0297fc0e5901119a1221705"></a><!-- doxytag: member="fb_hal.h::FB_ACK_REC" ref="a7bc94fd4a0297fc0e5901119a1221705" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FB_ACK_REC&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>In acknowledge receive mode. </p>

</div>
</div>
<a class="anchor" id="ab26a4ae4e4ada896a31f54f982289c32"></a><!-- doxytag: member="fb_hal.h::FB_BUS_FREE" ref="ab26a4ae4e4ada896a31f54f982289c32" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FB_BUS_FREE&#160;&#160;&#160;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>EIB bus is free and messages can be send. </p>

<p>Referenced by <a class="el" href="fb__hal_8c.html#a1d2bce7e6ac0dd55aa811e53722ea4be">fbhal_Init()</a>.</p>

</div>
</div>
<a class="anchor" id="af2d482f2d953338c0597858a0f7571b7"></a><!-- doxytag: member="fb_hal.h::FB_CHAR_REC" ref="af2d482f2d953338c0597858a0f7571b7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FB_CHAR_REC&#160;&#160;&#160;(1 &lt;&lt; 3)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>In character receive mode. </p>

</div>
</div>
<a class="anchor" id="aa8e43e2058f1516200f5d701fb071ca8"></a><!-- doxytag: member="fb_hal.h::FB_COLLISION" ref="aa8e43e2058f1516200f5d701fb071ca8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FB_COLLISION&#160;&#160;&#160;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Collision detected. </p>

</div>
</div>
<a class="anchor" id="a529d90c5411df26d904a2fa1ea75f088"></a><!-- doxytag: member="fb_hal.h::FB_FRAME_ERR" ref="a529d90c5411df26d904a2fa1ea75f088" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FB_FRAME_ERR&#160;&#160;&#160;(1 &lt;&lt; 7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Error error, e.g. stop bit is missing. </p>

</div>
</div>
<a class="anchor" id="af3040cb5e83cff0109eeaa7317ba2d45"></a><!-- doxytag: member="fb_hal.h::FB_MESSAGE" ref="af3040cb5e83cff0109eeaa7317ba2d45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FB_MESSAGE&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Message type is a EIB message. </p>

</div>
</div>
<a class="anchor" id="ac16eee46dc37a0c4c35b6e3e40fa5637"></a><!-- doxytag: member="fb_hal.h::FB_PARITY_ERR" ref="ac16eee46dc37a0c4c35b6e3e40fa5637" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FB_PARITY_ERR&#160;&#160;&#160;(1 &lt;&lt; 6)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parity error in octet. </p>

</div>
</div>
<a class="anchor" id="aa163a3608cbfcbcd50b1bd619cfd4508"></a><!-- doxytag: member="fb_hal.h::HAL_EXT" ref="aa163a3608cbfcbcd50b1bd619cfd4508" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_EXT&#160;&#160;&#160;extern</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set HAL_EXT to extern to make clear it is include from an external source like a lib. </p>

</div>
</div>
<a class="anchor" id="a3c1a27aacf1dd33edffa2422da638d0f"></a><!-- doxytag: member="fb_hal.h::IO_INPUT" ref="a3c1a27aacf1dd33edffa2422da638d0f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IO_INPUT&#160;&#160;&#160;0U</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Portpin-Direction is Input. </p>

<p>Referenced by <a class="el" href="fb__hal_8c.html#a1d2bce7e6ac0dd55aa811e53722ea4be">fbhal_Init()</a>, and <a class="el" href="fb__in8__app_8c.html#aabc97de0ba2150af0af7d2ddb8293824">restartApplication()</a>.</p>

</div>
</div>
<a class="anchor" id="aae48313230e7f773bf495ada1171c506"></a><!-- doxytag: member="fb_hal.h::IO_OUTPUT" ref="aae48313230e7f773bf495ada1171c506" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IO_OUTPUT&#160;&#160;&#160;1U</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Portpin-Direction is Output. </p>

<p>Referenced by <a class="el" href="fb__hal_8c.html#a1d2bce7e6ac0dd55aa811e53722ea4be">fbhal_Init()</a>, <a class="el" href="fb__hal_8c.html#a30c6b413389944e9362e0bb20467962e">panic()</a>, and <a class="el" href="fb__in8__app_8c.html#aabc97de0ba2150af0af7d2ddb8293824">restartApplication()</a>.</p>

</div>
</div>
<a class="anchor" id="a29e413f6725b2ba32d165ffaa35b01e5"></a><!-- doxytag: member="fb_hal.h::OFF" ref="a29e413f6725b2ba32d165ffaa35b01e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFF&#160;&#160;&#160;0U</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Global Define: OFF = 0. </p>

<p>Referenced by <a class="el" href="fb__hal_8c.html#a1d2bce7e6ac0dd55aa811e53722ea4be">fbhal_Init()</a>, and <a class="el" href="fb__hal_8c.html#a30c6b413389944e9362e0bb20467962e">panic()</a>.</p>

</div>
</div>
<a class="anchor" id="ad76d1750a6cdeebd506bfcd6752554d2"></a><!-- doxytag: member="fb_hal.h::ON" ref="ad76d1750a6cdeebd506bfcd6752554d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ON&#160;&#160;&#160;1U</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Global Define: ON = 1. </p>

<p>Referenced by <a class="el" href="fb__hal_8c.html#a30c6b413389944e9362e0bb20467962e">panic()</a>.</p>

</div>
</div>
<a class="anchor" id="ac954f3924dbc5e5bff23d4be72aa9b67"></a><!-- doxytag: member="fb_hal.h::PANIC_EEPROM" ref="ac954f3924dbc5e5bff23d4be72aa9b67" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PANIC_EEPROM&#160;&#160;&#160;0x03</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Error in eeprom. </p>

</div>
</div>
<a class="anchor" id="a3a73bcf1a2e852ef3035725ff088a9e1"></a><!-- doxytag: member="fb_hal.h::PANIC_MEMORY" ref="a3a73bcf1a2e852ef3035725ff088a9e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PANIC_MEMORY&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Memory error, is set when no memory is left and it is tried to allocate memory. </p>

</div>
</div>
<a class="anchor" id="a0e1835b0358e59cc10ca44e68c4ad1d4"></a><!-- doxytag: member="fb_hal.h::PANIC_NO_MSG" ref="a0e1835b0358e59cc10ca44e68c4ad1d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PANIC_NO_MSG&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>No more space for messages is left in allocated message queue. </p>

</div>
</div>
<a class="anchor" id="aecc96d1e182add83fb6cda0b2319d418"></a><!-- doxytag: member="fb_hal.h::PANIC_RESOURCE" ref="aecc96d1e182add83fb6cda0b2319d418" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PANIC_RESOURCE&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>No more resources are available. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a4111a79334fb10bc9c786f510256c20b"></a><!-- doxytag: member="fb_hal.h::fb_hal_restart" ref="a4111a79334fb10bc9c786f510256c20b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_EXT void fb_hal_restart </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Restart the application by activating the watchdog and block the program. </p>

<p>References <a class="el" href="freebus-atmega168_8h.html#a2b38be97fd3da86e404ddc4fdea79bb7">ENABLE_WATCHDOG</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c.html#a088341f3603f5de9eb4817a8199391c6">A_Restart()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__hal_8h_a4111a79334fb10bc9c786f510256c20b_icgraph.png" border="0" usemap="#fb__hal_8h_a4111a79334fb10bc9c786f510256c20b_icgraph" alt=""/></div>
<map name="fb__hal_8h_a4111a79334fb10bc9c786f510256c20b_icgraph" id="fb__hal_8h_a4111a79334fb10bc9c786f510256c20b_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a088341f3603f5de9eb4817a8199391c6" title="Restart the program on the microcontroller." alt="" coords="155,5,235,35"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="af70a4606fe5ce0777a371e0c6c3540fb"></a><!-- doxytag: member="fb_hal.h::fb_hal_txqueue_msg" ref="af70a4606fe5ce0777a371e0c6c3540fb" args="(struct msg *tx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_EXT uint8_t fb_hal_txqueue_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&#160;</td>
          <td class="paramname"> <em>tx</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Queue message for sending. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tx</td><td>Pointer to message</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e">queuemsg()</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c.html#a4a0be801ed4f2d9b2cbce548adf56a76">A_ADC_Read()</a>, <a class="el" href="fb__prot_8c.html#a37d55968595e78e21dc1dba21418acf4">A_DeviceDescriptor_Read()</a>, <a class="el" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c">A_Memory_Read()</a>, <a class="el" href="fb__prot_8c.html#ae42ed05d4ccf0a841bdaa32fe7af4478">A_PhysicalAddress_Read()</a>, <a class="el" href="fb__prot_8c.html#a349ae562a88e3299f95943d9dcc2d794">fbprot_msg_handler()</a>, <a class="el" href="fb__prot_8c.html#a440973c20d3055721521a359aee68536">ncd_resp()</a>, <a class="el" href="fb__2-dimmer__app_8c.html#acdb92216340d9fc010cc12bbb44bbfb2">readApplication()</a>, <a class="el" href="fb__prot_8c.html#ade80ef84f4f14d25a2283b43d9c1a54f">sendExtTelegram()</a>, and <a class="el" href="fb__prot_8c.html#a990a78673785da5bb024bfaf60e0984a">sendTelegram()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the call graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__hal_8h_af70a4606fe5ce0777a371e0c6c3540fb_cgraph.png" border="0" usemap="#fb__hal_8h_af70a4606fe5ce0777a371e0c6c3540fb_cgraph" alt=""/></div>
<map name="fb__hal_8h_af70a4606fe5ce0777a371e0c6c3540fb_cgraph" id="fb__hal_8h_af70a4606fe5ce0777a371e0c6c3540fb_cgraph">
<area shape="rect" id="node3" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="208,5,299,35"/></map>
<!-- endSectionContent --></div>
</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__hal_8h_af70a4606fe5ce0777a371e0c6c3540fb_icgraph.png" border="0" usemap="#fb__hal_8h_af70a4606fe5ce0777a371e0c6c3540fb_icgraph" alt=""/></div>
<map name="fb__hal_8h_af70a4606fe5ce0777a371e0c6c3540fb_icgraph" id="fb__hal_8h_af70a4606fe5ce0777a371e0c6c3540fb_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a4a0be801ed4f2d9b2cbce548adf56a76" title="Read the values from the ADC converter." alt="" coords="479,5,583,35"/><area shape="rect" id="node5" href="fb__prot_8c.html#a37d55968595e78e21dc1dba21418acf4" title="Is called if information for the BCU type is requested." alt="" coords="437,59,624,88"/><area shape="rect" id="node7" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c" title="Read data from eeprom and return send it as telegram back to the requester." alt="" coords="467,165,595,195"/><area shape="rect" id="node9" href="fb__prot_8c.html#ae42ed05d4ccf0a841bdaa32fe7af4478" title="Returns the address of the device." alt="" coords="209,215,388,244"/><area shape="rect" id="node11" href="fb__prot_8c.html#a349ae562a88e3299f95943d9dcc2d794" title="That function is called from main loop." alt="" coords="224,268,373,297"/><area shape="rect" id="node15" href="fb__prot_8c.html#a440973c20d3055721521a359aee68536" title="Sicherungslayer." alt="" coords="259,111,339,140"/><area shape="rect" id="node22" href="fb__2-dimmer__app_8c.html#acdb92216340d9fc010cc12bbb44bbfb2" title="Read status from port and return it." alt="" coords="239,321,359,351"/><area shape="rect" id="node24" href="fb__prot_8c.html#ade80ef84f4f14d25a2283b43d9c1a54f" title="Send telegram as response to signal current state of the port to other devices." alt="" coords="233,375,364,404"/><area shape="rect" id="node26" href="fb__prot_8c.html#a990a78673785da5bb024bfaf60e0984a" title="Send telegram as response to signal current state of the port to other devices." alt="" coords="243,428,355,457"/><area shape="rect" id="node13" href="fb__in8__app_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the application and chec..." alt="" coords="504,268,557,297"/><area shape="rect" id="node20" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf" title="Write recieved data to the eeprom." alt="" coords="467,112,595,141"/><area shape="rect" id="node28" href="fb__in8__app_8c.html#a8d1473313842fe123fec771c086af269" title="Port Function: Jalousie." alt="" coords="464,375,597,404"/><area shape="rect" id="node30" href="fb__in8__app_8c.html#a71a91b98ae9a796dac4ab23c7e3ff6d8" title="Port Function: switch." alt="" coords="468,428,593,457"/><area shape="rect" id="node32" href="fb__relais__app_8c.html#a1f6d9eb16dbc08dfcfac5f8ceb8d7f40" title="processOutputs" alt="" coords="469,481,592,511"/><area shape="rect" id="node34" href="fb__relais__app_8c.html#a30773cfc4105728c9628fca36c8c7c20" title="Function is called if A_GroupValue_Write is received." alt="" coords="673,481,785,511"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a3e4f31f4b97d833e7ef5fb9615def386"></a><!-- doxytag: member="fb_hal.h::fb_send_ack" ref="a3e4f31f4b97d833e7ef5fb9615def386" args="(uint8_t value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_EXT void fb_send_ack </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>value</em>&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function to set the ack value for the response to a telegram which must be send in a absolutly excat timing. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>Ackvalue can be FB_ACK, FB_NACK, FB_BUSY and FB_NONE </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="fb__ain10v_8c.html#a3f0c55f449560b03ce0ac43270c26600">value</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c.html#a4a0be801ed4f2d9b2cbce548adf56a76">A_ADC_Read()</a>, <a class="el" href="fb__prot_8c.html#a37d55968595e78e21dc1dba21418acf4">A_DeviceDescriptor_Read()</a>, <a class="el" href="fb__prot_8c.html#ae56aada1e48493023c8f3ecf7a1e71a7">A_GroupValue_Read()</a>, <a class="el" href="fb__prot_8c.html#abb5d4fc672e3e3e123f5f3e6e9f901e3">A_GroupValue_Write()</a>, <a class="el" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c">A_Memory_Read()</a>, <a class="el" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf">A_Memory_Write()</a>, <a class="el" href="fb__prot_8c.html#ae42ed05d4ccf0a841bdaa32fe7af4478">A_PhysicalAddress_Read()</a>, <a class="el" href="fb__prot_8c.html#ac3b30c7591e51974ab895440929395c6">A_PhysicalAddress_Write()</a>, <a class="el" href="fb__prot_8c.html#a349ae562a88e3299f95943d9dcc2d794">fbprot_msg_handler()</a>, <a class="el" href="fb__prot_8c.html#a5928e9483083ad86d6c82f0b0ca533af">Ignore()</a>, <a class="el" href="fb__prot_8c.html#a3b317425f1358ea37c8fca124e29c277">T_Connect_Req()</a>, and <a class="el" href="fb__prot_8c.html#a0675ad49aa389619806157f585c466ee">T_Disconnect_Req()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__hal_8h_a3e4f31f4b97d833e7ef5fb9615def386_icgraph.png" border="0" usemap="#fb__hal_8h_a3e4f31f4b97d833e7ef5fb9615def386_icgraph" alt=""/></div>
<map name="fb__hal_8h_a3e4f31f4b97d833e7ef5fb9615def386_icgraph" id="fb__hal_8h_a3e4f31f4b97d833e7ef5fb9615def386_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a4a0be801ed4f2d9b2cbce548adf56a76" title="Read the values from the ADC converter." alt="" coords="196,5,300,35"/><area shape="rect" id="node5" href="fb__prot_8c.html#a37d55968595e78e21dc1dba21418acf4" title="Is called if information for the BCU type is requested." alt="" coords="155,59,341,88"/><area shape="rect" id="node7" href="fb__prot_8c.html#ae56aada1e48493023c8f3ecf7a1e71a7" title="A read request to the application." alt="" coords="173,112,323,141"/><area shape="rect" id="node9" href="fb__prot_8c.html#abb5d4fc672e3e3e123f5f3e6e9f901e3" title="Is called if a broadcast is received with a matching group address (eg." alt="" coords="173,165,323,195"/><area shape="rect" id="node11" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c" title="Read data from eeprom and return send it as telegram back to the requester." alt="" coords="184,219,312,248"/><area shape="rect" id="node13" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf" title="Write recieved data to the eeprom." alt="" coords="184,272,312,301"/><area shape="rect" id="node15" href="fb__prot_8c.html#ae42ed05d4ccf0a841bdaa32fe7af4478" title="Returns the address of the device." alt="" coords="159,325,337,355"/><area shape="rect" id="node17" href="fb__prot_8c.html#ac3b30c7591e51974ab895440929395c6" title="Set the received address as our new device address." alt="" coords="159,379,337,408"/><area shape="rect" id="node19" href="fb__prot_8c.html#a349ae562a88e3299f95943d9dcc2d794" title="That function is called from main loop." alt="" coords="173,432,323,461"/><area shape="rect" id="node23" href="fb__prot_8c.html#a5928e9483083ad86d6c82f0b0ca533af" title="Send aknowledge to certain message." alt="" coords="217,485,279,515"/><area shape="rect" id="node25" href="fb__prot_8c.html#a3b317425f1358ea37c8fca124e29c277" title="Called to start a connection to a physical address." alt="" coords="188,539,308,568"/><area shape="rect" id="node27" href="fb__prot_8c.html#a0675ad49aa389619806157f585c466ee" title="Release the transport connection." alt="" coords="179,592,317,621"/><area shape="rect" id="node21" href="fb__in8__app_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the application and chec..." alt="" coords="391,432,444,461"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="afa7a39eafe5190b954bac9e77ea52e2d"></a><!-- doxytag: member="fb_hal.h::fbhal_checkProgTaster" ref="afa7a39eafe5190b954bac9e77ea52e2d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_EXT uint8_t fbhal_checkProgTaster </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check the programm button and set programming mode and switch LED depending on programming mode. </p>
<p>Programm button is on PB0 and pin 4 on Freebus connector.</p>
<p>Function detects the state of the prog button (debounced) and sets the programming mode. This is done only every 16th call, because the µC needs some time to switch from output to input mode and so we got more negative duty cylce for the prog led.</p>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000001">Bug:</a></b></dt><dd>The macro SET_IO_PROG(IO_OUTPUT) could not be used here, because this sets the DDR and also the PORT = 0. This won't work. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000086">Todo:</a></b></dt><dd>Check if this function is working fine. </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Matthias Fechner, Tobias Buss </dd></dl>

<p>References <a class="el" href="delay_8h.html#adeb129e484b57c960e4a118fab9cdb21">delay</a>, <a class="el" href="freebus-atmega168_8h.html#af08f963b06ce58883a37343e92584fec">PROG_DDR</a>, <a class="el" href="freebus-atmega168_8h.html#a8aaceef1e80ae3b6c312a3748f1eea55">PROG_PIN</a>, <a class="el" href="freebus-atmega168_8h.html#a4459092141141443dccc90a3fff94fbf">PROG_PORT</a>, <a class="el" href="fb_8h.html#aff0cdfa8a30dbfdad5cc03301ba601ff">SS_PROG</a>, and <a class="el" href="fb__hal_8h.html#a53ac9c8b9cfb94746b9f5b39bf152620">systemState</a>.</p>

<p>Referenced by <a class="el" href="fb__ain10v_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__hal_8h_afa7a39eafe5190b954bac9e77ea52e2d_icgraph.png" border="0" usemap="#fb__hal_8h_afa7a39eafe5190b954bac9e77ea52e2d_icgraph" alt=""/></div>
<map name="fb__hal_8h_afa7a39eafe5190b954bac9e77ea52e2d_icgraph" id="fb__hal_8h_afa7a39eafe5190b954bac9e77ea52e2d_icgraph">
<area shape="rect" id="node3" href="fb__ain10v_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the application and chec..." alt="" coords="220,5,273,35"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a89a6ed807cf111efb29a00f42e35cc3a"></a><!-- doxytag: member="fb_hal.h::fbhal_Init" ref="a89a6ed807cf111efb29a00f42e35cc3a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_EXT void fbhal_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set input/output mode to PORTs, init timers and interrupts. </p>

<p>References <a class="el" href="freebus-atmega168_8h.html#a06a8b1381f40ae82a34572569ab83486">CONFIGURE_INT0</a>, <a class="el" href="fb__hal_8c.html#a7bb97dbc2abccfc6ec4a1da276be1352">EIB_BIT_TIME</a>, <a class="el" href="fb__hal_8c.html#ac7553420ae73a48c64bc99ebae0cb1ed">EIB_NONE_MODE</a>, <a class="el" href="freebus-atmega168_8h.html#adda77ca346120bfa4af403b6abc26d51">ENABLE_RX_INT</a>, <a class="el" href="fb__hal_8h.html#ab26a4ae4e4ada896a31f54f982289c32">FB_BUS_FREE</a>, <a class="el" href="fb__hal_8h.html#a3c1a27aacf1dd33edffa2422da638d0f">IO_INPUT</a>, <a class="el" href="fb__hal_8h.html#aae48313230e7f773bf495ada1171c506">IO_OUTPUT</a>, <a class="el" href="fb__hal_8h.html#a29e413f6725b2ba32d165ffaa35b01e5">OFF</a>, <a class="el" href="fb__hal_8h.html#a53ac9c8b9cfb94746b9f5b39bf152620">systemState</a>, and <a class="el" href="fb__hal_8c.html#af24054d97e225ff81412767e9e92780ba95f116553b8e2d1cd7be8a22840d1cf2">TS_WAITING_CHARS</a>.</p>

<p>Referenced by <a class="el" href="fb__adc_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__hal_8h_a89a6ed807cf111efb29a00f42e35cc3a_icgraph.png" border="0" usemap="#fb__hal_8h_a89a6ed807cf111efb29a00f42e35cc3a_icgraph" alt=""/></div>
<map name="fb__hal_8h_a89a6ed807cf111efb29a00f42e35cc3a_icgraph" id="fb__hal_8h_a89a6ed807cf111efb29a00f42e35cc3a_icgraph">
<area shape="rect" id="node3" href="fb__adc_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the application and chec..." alt="" coords="135,5,188,35"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a29aed42c30189a510295e50c98f34afc"></a><!-- doxytag: member="fb_hal.h::panic" ref="a29aed42c30189a510295e50c98f34afc" args="(uint8_t reason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_EXT void panic </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>reason</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Hold application and set blink code to PORTB pin 0, our prog pin and LED. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000087">Todo:</a></b></dt><dd>Replace that function with a mechanism that not completely kills the controller application </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">reason</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000099">Todo:</a></b></dt><dd>Replace that function with a mechanism that not completely kills the controller application </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">reason</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a53ac9c8b9cfb94746b9f5b39bf152620"></a><!-- doxytag: member="fb_hal.h::systemState" ref="a53ac9c8b9cfb94746b9f5b39bf152620" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_EXT uint8_t <a class="el" href="fb__hal_8h.html#a53ac9c8b9cfb94746b9f5b39bf152620">systemState</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the system state. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000079">Todo:</a></b></dt><dd>give more detailed explaination </dd></dl>

<p>Referenced by <a class="el" href="fb__prot_8c.html#ae42ed05d4ccf0a841bdaa32fe7af4478">A_PhysicalAddress_Read()</a>, <a class="el" href="fb__prot_8c.html#ac3b30c7591e51974ab895440929395c6">A_PhysicalAddress_Write()</a>, <a class="el" href="fb__hal_8c.html#a85ef2600dfae61cd15f445efbc31fb60">fbhal_checkProgTaster()</a>, <a class="el" href="fb__hal_8c.html#a1d2bce7e6ac0dd55aa811e53722ea4be">fbhal_Init()</a>, <a class="el" href="fb__eeprom_8c.html#a55d6c1613e8277e1d8d3d9187b773c3a">mem_ReadByte()</a>, and <a class="el" href="fb__eeprom_8c.html#a53d6293cbd69348099446f41c12943a3">mem_WriteBlock()</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Mar 7 2011 10:08:41 for FreeBusAVR by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
