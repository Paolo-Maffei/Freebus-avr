<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FreeBusAVR: include/fb_eeprom.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>include/fb_eeprom.h File Reference</h1>
<p>Handling the access and mapping to the eeprom.  
<a href="#_details">More...</a></p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="fb__eeprom_8h__dep__incl.png" border="0" usemap="#include_2fb__eeprom_8hdep_map" alt=""/></div>
<map name="include_2fb__eeprom_8hdep_map" id="include_2fb__eeprom_8hdep">
<area shape="rect" id="node3" href="fb__2-dimmer__app_8c.html" title="Dimmer application based on the Gira 1032 2 channel dimmer." alt="" coords="5,83,219,112"/><area shape="rect" id="node5" href="fb__in8__app_8c.html" title="The application for 8 binary inputs Manufactorer code is 0x04 = Jung &#160;Device type..." alt="" coords="243,83,387,112"/><area shape="rect" id="node7" href="fb__relais__app_8c.html" title="The relais application to switch 8 relais Manufactorer code is 0x04 = Jung &#160;Device..." alt="" coords="411,83,576,112"/><area shape="rect" id="node9" href="fb__eeprom_8c.html" title="The eeprom is divided into two parts. The complete size of the eeprom is 256+18+24..." alt="" coords="600,83,709,112"/><area shape="rect" id="node11" href="fb__hal_8c.html" title="Freebus Hardware Layer. Implementation of a software&#45; uart + timer handling This..." alt="" coords="733,83,816,112"/><area shape="rect" id="node13" href="fb__prot_8c.html" title="Handle all requests which are EIB bases like write current address or group address..." alt="" coords="840,83,928,112"/></map>
</div>

<p><a href="fb__eeprom_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSTRUCT__DEFPARAM.html">STRUCT_DEFPARAM</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Struktur fuer die Default-Parameter.  <a href="structSTRUCT__DEFPARAM.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a12b31afaaed22a9fd3edfb7cf308ccc6">EEPROM_EXT</a>&nbsp;&nbsp;&nbsp;extern</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set EEPROM_EXT to extern to make clear it is include from an external source like a lib.  <a href="#a12b31afaaed22a9fd3edfb7cf308ccc6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a27e2dbb193fe9e6cfbf74e9103117fcf">BASE_ADDRESS_OFFSET</a>&nbsp;&nbsp;&nbsp;0x0100</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Speichergroesse des EEPROMs.  <a href="#a27e2dbb193fe9e6cfbf74e9103117fcf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#adfc8790bc691a72a03b40b7641801fb6">NODEPARAM_SIZE</a>&nbsp;&nbsp;&nbsp;0x00FF</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of parameter structur.  <a href="#adfc8790bc691a72a03b40b7641801fb6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a36db053db1ad42a1ed0eedf6cbd13ff9">APPLICATION_MEM_BASE_ADR</a>&nbsp;&nbsp;&nbsp;0x0000</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">application memory startaddress  <a href="#a36db053db1ad42a1ed0eedf6cbd13ff9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#af747e16d33448a7273ab1c301e8ee235">APPLICATION_MEM_SIZE</a>&nbsp;&nbsp;&nbsp;0x0017</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of application memory.  <a href="#af747e16d33448a7273ab1c301e8ee235"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#aeac389a0f36adb86fc05441813ef6a8f">SYSTEMSTATE</a>&nbsp;&nbsp;&nbsp;0x0060</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">System Status.  <a href="#aeac389a0f36adb86fc05441813ef6a8f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a961cdab61aff93bd075220ecac3942b3">USERRAM_BASE_ADR</a>&nbsp;&nbsp;&nbsp;0x00CE</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">User RAM startaddress.  <a href="#a961cdab61aff93bd075220ecac3942b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#af71e2dd6203c29e2508fd31affe62459">USERRAM_SIZE</a>&nbsp;&nbsp;&nbsp;0x0012</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of user RAM.  <a href="#af71e2dd6203c29e2508fd31affe62459"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#ae3ef7bba113f663df6996f286b632a3f">EEPROM_SIZE</a>&nbsp;&nbsp;&nbsp;NODEPARAM_SIZE + APPLICATION_MEM_SIZE + USERRAM_SIZE</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of data structur.  <a href="#ae3ef7bba113f663df6996f286b632a3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a4ea9ff8ea5eb2ec0e0e150d54a0bc0ee">MAX_EEPROM_SIZE</a>&nbsp;&nbsp;&nbsp;EEPROM_SIZE - 1</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum size of the eeprom usable.  <a href="#a4ea9ff8ea5eb2ec0e0e150d54a0bc0ee"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EEPROM_EXT uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca">eeprom_ParamRead</a> (uint16_t wAdr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data from the eeprom cache and return it.  <a href="#a93b2810dc3abdedaa3dfa772943fb5ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EEPROM_EXT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#af44d586826b8dd9074953e51cbe2a515">eeprom_ParamWrite</a> (uint16_t addr, uint8_t len, uint8_t *dat)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write data to the eeprom cache and trigger background process to write eeprom cache to real eeprom.  <a href="#af44d586826b8dd9074953e51cbe2a515"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EEPROM_EXT uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a7bf612843223717f1d420610cbd12d6e">eeprom_busy</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if eeprom cache was written completely to eeprom.  <a href="#a7bf612843223717f1d420610cbd12d6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EEPROM_EXT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a7b1be2223a2fe16a4791caa396ca5253">eeprom_ParamSetDefault</a> (const <a class="el" href="structSTRUCT__DEFPARAM.html">STRUCT_DEFPARAM</a> *pParam)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">store the default parameter directly to the eeprom  <a href="#a7b1be2223a2fe16a4791caa396ca5253"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EEPROM_EXT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a33e921e859a82eafdad883c34888a760">eeprom_Init</a> (uint8_t *pNodeParam, uint16_t wParamlen)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the eeprom to the eeprom cache.  <a href="#a33e921e859a82eafdad883c34888a760"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8h.html#a4106e144334e369c48eed9dfe23e593c">eeprom_print</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print the complete eeprom to DEBUG defined.  <a href="#a4106e144334e369c48eed9dfe23e593c"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Handling the access and mapping to the eeprom. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Dirk Opfer, Matthias Fechner, Christian Bode </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Sat Apr 05 23:37:24 2008 </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a36db053db1ad42a1ed0eedf6cbd13ff9"></a><!-- doxytag: member="fb_eeprom.h::APPLICATION_MEM_BASE_ADR" ref="a36db053db1ad42a1ed0eedf6cbd13ff9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APPLICATION_MEM_BASE_ADR&nbsp;&nbsp;&nbsp;0x0000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>application memory startaddress </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00233">eeprom_ParamWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="af747e16d33448a7273ab1c301e8ee235"></a><!-- doxytag: member="fb_eeprom.h::APPLICATION_MEM_SIZE" ref="af747e16d33448a7273ab1c301e8ee235" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APPLICATION_MEM_SIZE&nbsp;&nbsp;&nbsp;0x0017</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Size of application memory. </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00233">eeprom_ParamWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="a27e2dbb193fe9e6cfbf74e9103117fcf"></a><!-- doxytag: member="fb_eeprom.h::BASE_ADDRESS_OFFSET" ref="a27e2dbb193fe9e6cfbf74e9103117fcf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BASE_ADDRESS_OFFSET&nbsp;&nbsp;&nbsp;0x0100</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Speichergroesse des EEPROMs. </p>
<p>Offset in BCU1 EEPROM </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb__eeprom_8c_source.html#l00302">eeprom_ParamSetDefault()</a>, <a class="el" href="fb__eeprom_8c_source.html#l00233">eeprom_ParamWrite()</a>, <a class="el" href="fb__prot_8c_source.html#l00251">findRespondGroupAddressByObjectNumber()</a>, <a class="el" href="fb__relais__app_8c_source.html#l00303">readApplication()</a>, and <a class="el" href="fb__relais__app_8c_source.html#l00382">runApplication()</a>.</p>

</div>
</div>
<a class="anchor" id="a12b31afaaed22a9fd3edfb7cf308ccc6"></a><!-- doxytag: member="fb_eeprom.h::EEPROM_EXT" ref="a12b31afaaed22a9fd3edfb7cf308ccc6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_EXT&nbsp;&nbsp;&nbsp;extern</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set EEPROM_EXT to extern to make clear it is include from an external source like a lib. </p>

</div>
</div>
<a class="anchor" id="ae3ef7bba113f663df6996f286b632a3f"></a><!-- doxytag: member="fb_eeprom.h::EEPROM_SIZE" ref="ae3ef7bba113f663df6996f286b632a3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_SIZE&nbsp;&nbsp;&nbsp;NODEPARAM_SIZE + APPLICATION_MEM_SIZE + USERRAM_SIZE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Size of data structur. </p>

<p>Referenced by <a class="el" href="fb__in8__app_8c_source.html#l00870">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ea9ff8ea5eb2ec0e0e150d54a0bc0ee"></a><!-- doxytag: member="fb_eeprom.h::MAX_EEPROM_SIZE" ref="a4ea9ff8ea5eb2ec0e0e150d54a0bc0ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_EEPROM_SIZE&nbsp;&nbsp;&nbsp;EEPROM_SIZE - 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The maximum size of the eeprom usable. </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c_source.html#l00302">eeprom_ParamSetDefault()</a>.</p>

</div>
</div>
<a class="anchor" id="adfc8790bc691a72a03b40b7641801fb6"></a><!-- doxytag: member="fb_eeprom.h::NODEPARAM_SIZE" ref="adfc8790bc691a72a03b40b7641801fb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NODEPARAM_SIZE&nbsp;&nbsp;&nbsp;0x00FF</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Size of parameter structur. </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb__eeprom_8c_source.html#l00302">eeprom_ParamSetDefault()</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00233">eeprom_ParamWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="aeac389a0f36adb86fc05441813ef6a8f"></a><!-- doxytag: member="fb_eeprom.h::SYSTEMSTATE" ref="aeac389a0f36adb86fc05441813ef6a8f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSTEMSTATE&nbsp;&nbsp;&nbsp;0x0060</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>System Status. </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00233">eeprom_ParamWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="a961cdab61aff93bd075220ecac3942b3"></a><!-- doxytag: member="fb_eeprom.h::USERRAM_BASE_ADR" ref="a961cdab61aff93bd075220ecac3942b3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USERRAM_BASE_ADR&nbsp;&nbsp;&nbsp;0x00CE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>User RAM startaddress. </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00233">eeprom_ParamWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="af71e2dd6203c29e2508fd31affe62459"></a><!-- doxytag: member="fb_eeprom.h::USERRAM_SIZE" ref="af71e2dd6203c29e2508fd31affe62459" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USERRAM_SIZE&nbsp;&nbsp;&nbsp;0x0012</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Size of user RAM. </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00233">eeprom_ParamWrite()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a7bf612843223717f1d420610cbd12d6e"></a><!-- doxytag: member="fb_eeprom.h::eeprom_busy" ref="a7bf612843223717f1d420610cbd12d6e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EEPROM_EXT uint8_t eeprom_busy </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if eeprom cache was written completely to eeprom. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if eeprom cache is not written completely to eeprom </dd></dl>

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000088">Todo:</a></b></dt><dd>???: </dd></dl>
</p>

<p>References <a class="el" href="fb_8h_source.html#l00050">FALSE</a>, <a class="el" href="msg__queue_8h_source.html#l00057">MSG_FREE</a>, <a class="el" href="msg__queue_8h_source.html#l00066">msg::state</a>, and <a class="el" href="fb_8h_source.html#l00054">TRUE</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00668">A_Restart()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__eeprom_8h_a7bf612843223717f1d420610cbd12d6e_icgraph.png" border="0" usemap="#fb__eeprom_8h_a7bf612843223717f1d420610cbd12d6e_icgraph_map" alt=""></div>
<map name="fb__eeprom_8h_a7bf612843223717f1d420610cbd12d6e_icgraph_map" id="fb__eeprom_8h_a7bf612843223717f1d420610cbd12d6e_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a088341f3603f5de9eb4817a8199391c6" title="Restart the program on the microcontroller." alt="" coords="155,5,235,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a33e921e859a82eafdad883c34888a760"></a><!-- doxytag: member="fb_eeprom.h::eeprom_Init" ref="a33e921e859a82eafdad883c34888a760" args="(uint8_t *pNodeParam, uint16_t wParamlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EEPROM_EXT void eeprom_Init </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>nodeParam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>paramlen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the eeprom to the eeprom cache. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodeParam</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>paramlen</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="fb__eeprom_8c_source.html#l00062">eeprom_NodeParam</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00063">eeprom_NodeParamLen</a>.</p>

<p>Referenced by <a class="el" href="fb__in8__app_8c_source.html#l00870">main()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__eeprom_8h_a33e921e859a82eafdad883c34888a760_icgraph.png" border="0" usemap="#fb__eeprom_8h_a33e921e859a82eafdad883c34888a760_icgraph_map" alt=""></div>
<map name="fb__eeprom_8h_a33e921e859a82eafdad883c34888a760_icgraph_map" id="fb__eeprom_8h_a33e921e859a82eafdad883c34888a760_icgraph">
<area shape="rect" id="node3" href="fb__in8__app_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the..." alt="" coords="144,5,195,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a93b2810dc3abdedaa3dfa772943fb5ca"></a><!-- doxytag: member="fb_eeprom.h::eeprom_ParamRead" ref="a93b2810dc3abdedaa3dfa772943fb5ca" args="(uint16_t wAdr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EEPROM_EXT uint8_t eeprom_ParamRead </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read data from the eeprom cache and return it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The address from the eeprom to read the data</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Value in eeprom on addr </dd></dl>

<p>References <a class="el" href="fb__eeprom_8h_source.html#l00048">APPLICATION_MEM_BASE_ADR</a>, <a class="el" href="fb__eeprom_8h_source.html#l00049">APPLICATION_MEM_SIZE</a>, <a class="el" href="fb__eeprom_8h_source.html#l00045">BASE_ADDRESS_OFFSET</a>, <a class="el" href="fb__eeprom_8c_source.html#l00062">eeprom_NodeParam</a>, <a class="el" href="fb__eeprom_8h_source.html#l00046">NODEPARAM_SIZE</a>, <a class="el" href="fb__hal_8h_source.html#l00083">systemState</a>, <a class="el" href="fb__eeprom_8h_source.html#l00050">SYSTEMSTATE</a>, <a class="el" href="fb__eeprom_8h_source.html#l00051">USERRAM_BASE_ADR</a>, and <a class="el" href="fb__eeprom_8h_source.html#l00052">USERRAM_SIZE</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00622">A_ADC_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00700">A_GroupValue_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00733">A_GroupValue_Write()</a>, <a class="el" href="fb__prot_8c_source.html#l00542">A_Memory_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00967">fbprot_Init()</a>, <a class="el" href="fb__prot_8c_source.html#l00251">findRespondGroupAddressByObjectNumber()</a>, <a class="el" href="fb__in8__app_8c_source.html#l00422">getPortFunction()</a>, <a class="el" href="fb__in8__app_8c_source.html#l00645">PortFunc_Jalousie()</a>, <a class="el" href="fb__in8__app_8c_source.html#l00497">PortFunc_Switch()</a>, <a class="el" href="fb__prot_8c_source.html#l00287">read_grp_addr()</a>, <a class="el" href="fb__relais__app_8c_source.html#l00303">readApplication()</a>, <a class="el" href="fb__in8__app_8c_source.html#l00330">restartApplication()</a>, <a class="el" href="fb__relais__app_8c_source.html#l00382">runApplication()</a>, <a class="el" href="fb__prot_8c_source.html#l00163">sendExtTelegram()</a>, <a class="el" href="fb__prot_8c_source.html#l00210">sendTelegram()</a>, <a class="el" href="fb__hal_8c_source.html#l00197">sendTestTelegram()</a>, <a class="el" href="fb__relais__app_8c_source.html#l00554">switchObjects()</a>, and <a class="el" href="fb__in8__app_8c_source.html#l00181">timerOverflowFunction()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__eeprom_8h_a93b2810dc3abdedaa3dfa772943fb5ca_icgraph.png" border="0" usemap="#fb__eeprom_8h_a93b2810dc3abdedaa3dfa772943fb5ca_icgraph_map" alt=""></div>
<map name="fb__eeprom_8h_a93b2810dc3abdedaa3dfa772943fb5ca_icgraph_map" id="fb__eeprom_8h_a93b2810dc3abdedaa3dfa772943fb5ca_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a4a0be801ed4f2d9b2cbce548adf56a76" title="Read the values from the ADC converter." alt="" coords="281,5,383,35"/><area shape="rect" id="node5" href="fb__prot_8c.html#ae56aada1e48493023c8f3ecf7a1e71a7" title="A read request to the application." alt="" coords="261,59,403,88"/><area shape="rect" id="node7" href="fb__prot_8c.html#abb5d4fc672e3e3e123f5f3e6e9f901e3" title="Is called if a broadcast is received with a matching group address (eg." alt="" coords="260,112,404,141"/><area shape="rect" id="node9" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c" title="Read data from eeprom and return send it as telegram back to the requester." alt="" coords="271,165,393,195"/><area shape="rect" id="node11" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b" title="Read configuration from eeprom is existant or set default values and write them to..." alt="" coords="553,271,631,300"/><area shape="rect" id="node15" href="fb__prot_8c.html#ac5c589c547e7f53fb4b2c9bbbbe8797a" title="Search through group address list and return the matching position of a group address..." alt="" coords="195,475,469,504"/><area shape="rect" id="node17" href="fb__prot_8c.html#ade80ef84f4f14d25a2283b43d9c1a54f" title="Send telegram as response to signal current state of the port to other devices." alt="" coords="531,448,653,477"/><area shape="rect" id="node19" href="fb__prot_8c.html#a990a78673785da5bb024bfaf60e0984a" title="Send telegram as response to signal current state of the port to other devices." alt="" coords="541,525,643,555"/><area shape="rect" id="node21" href="fb__in8__app_8c.html#a8d1473313842fe123fec771c086af269" title="Port Function: Jalousie." alt="" coords="716,573,844,603"/><area shape="rect" id="node23" href="fb__in8__app_8c.html#a3cabe34d9b90083ff13af0188e622539" title="Timer1 is used as application timer." alt="" coords="893,573,1043,603"/><area shape="rect" id="node25" href="fb__in8__app_8c.html#a71a91b98ae9a796dac4ab23c7e3ff6d8" title="Port Function: switch." alt="" coords="720,627,840,656"/><area shape="rect" id="node29" href="fb__in8__app_8c.html#ac5f68c3b0256b1990defd5eb2f2f1967" title="Get the function code for the select port." alt="" coords="723,420,837,449"/><area shape="rect" id="node34" href="fb__prot_8c.html#aaec72f885e36952a75395779cf20d684" title="Read the group addresses from the eeprom and save them in the struct grp_addr." alt="" coords="280,269,384,299"/><area shape="rect" id="node37" href="fb__relais__app_8c.html#acdb92216340d9fc010cc12bbb44bbfb2" title="Read status from port and return it." alt="" coords="277,731,387,760"/><area shape="rect" id="node39" href="fb__in8__app_8c.html#aabc97de0ba2150af0af7d2ddb8293824" title="Function is called when microcontroller gets power or if the application must be..." alt="" coords="271,784,393,813"/><area shape="rect" id="node41" href="fb__relais__app_8c.html#a30773cfc4105728c9628fca36c8c7c20" title="Function is called if A_GroupValue_Write is received." alt="" coords="540,835,644,864"/><area shape="rect" id="node45" href="fb__hal_8c.html#ab475358073d6ed6f59de0b9fd41e65ee" title="That function can be use to send a test telegramm to the bus, e.g." alt="" coords="528,217,656,247"/><area shape="rect" id="node48" href="fb__relais__app_8c.html#aac9e4f65925a5a959cb5df9ed091b3b7" title="Switch the objects to state in portValue and save value to eeprom if necessary." alt="" coords="280,888,384,917"/><area shape="rect" id="node13" href="fb__in8__app_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the..." alt="" coords="755,244,805,273"/><area shape="rect" id="node50" href="fb__relais__app_8c.html#aabc97de0ba2150af0af7d2ddb8293824" title="Function is called when microcontroller gets power or if the application must be..." alt="" coords="531,888,653,917"/><area shape="rect" id="node53" href="fb__relais__app_8c.html#a3cabe34d9b90083ff13af0188e622539" title="Timer1 is used as application timer." alt="" coords="517,941,667,971"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7b1be2223a2fe16a4791caa396ca5253"></a><!-- doxytag: member="fb_eeprom.h::eeprom_ParamSetDefault" ref="a7b1be2223a2fe16a4791caa396ca5253" args="(const STRUCT_DEFPARAM *pParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EEPROM_EXT void eeprom_ParamSetDefault </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structSTRUCT__DEFPARAM.html">STRUCT_DEFPARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>pParam</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>store the default parameter directly to the eeprom </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pParam</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="fb__eeprom_8c_source.html#l00052">eeprom_cmds::addr</a>, <a class="el" href="fb__eeprom_8h_source.html#l00045">BASE_ADDRESS_OFFSET</a>, <a class="el" href="fb__eeprom_8c_source.html#l00062">eeprom_NodeParam</a>, <a class="el" href="fb__eeprom_8c_source.html#l00063">eeprom_NodeParamLen</a>, <a class="el" href="fb__eeprom_8h_source.html#l00056">MAX_EEPROM_SIZE</a>, <a class="el" href="fb__eeprom_8h_source.html#l00046">NODEPARAM_SIZE</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00084">prog_ee()</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00967">fbprot_Init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__eeprom_8h_a7b1be2223a2fe16a4791caa396ca5253_cgraph.png" border="0" usemap="#fb__eeprom_8h_a7b1be2223a2fe16a4791caa396ca5253_cgraph_map" alt=""></div>
<map name="fb__eeprom_8h_a7b1be2223a2fe16a4791caa396ca5253_cgraph_map" id="fb__eeprom_8h_a7b1be2223a2fe16a4791caa396ca5253_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8c.html#a6ab1e3cc3c300d12592e39648da8c022" title="Store on byte on eeprom." alt="" coords="225,5,292,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__eeprom_8h_a7b1be2223a2fe16a4791caa396ca5253_icgraph.png" border="0" usemap="#fb__eeprom_8h_a7b1be2223a2fe16a4791caa396ca5253_icgraph_map" alt=""></div>
<map name="fb__eeprom_8h_a7b1be2223a2fe16a4791caa396ca5253_icgraph_map" id="fb__eeprom_8h_a7b1be2223a2fe16a4791caa396ca5253_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b" title="Read configuration from eeprom is existant or set default values and write them to..." alt="" coords="225,5,303,35"/><area shape="rect" id="node5" href="fb__in8__app_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the..." alt="" coords="352,5,403,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af44d586826b8dd9074953e51cbe2a515"></a><!-- doxytag: member="fb_eeprom.h::eeprom_ParamWrite" ref="af44d586826b8dd9074953e51cbe2a515" args="(uint16_t addr, uint8_t len, uint8_t *dat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EEPROM_EXT void eeprom_ParamWrite </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>dat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write data to the eeprom cache and trigger background process to write eeprom cache to real eeprom. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>start address of the data in the eeprom </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>length of data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dat</em>&nbsp;</td><td>data to write in the eeprom </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="fb__eeprom_8c_source.html#l00052">eeprom_cmds::addr</a>, <a class="el" href="msg__queue_8h_source.html#l00110">AllocMsg()</a>, <a class="el" href="fb__eeprom_8h_source.html#l00048">APPLICATION_MEM_BASE_ADR</a>, <a class="el" href="fb__eeprom_8h_source.html#l00049">APPLICATION_MEM_SIZE</a>, <a class="el" href="fb__eeprom_8h_source.html#l00045">BASE_ADDRESS_OFFSET</a>, <a class="el" href="fb__eeprom_8c_source.html#l00051">eeprom_cmds::count</a>, <a class="el" href="fb__eeprom_8c_source.html#l00054">eeprom_cmds::data</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb__eeprom_8c_source.html#l00062">eeprom_NodeParam</a>, <a class="el" href="fb__eeprom_8h_source.html#l00046">NODEPARAM_SIZE</a>, <a class="el" href="fb__eeprom_8c_source.html#l00053">eeprom_cmds::offset</a>, <a class="el" href="msg__queue_8c_source.html#l00087">queuemsg()</a>, <a class="el" href="fb__hal_8h_source.html#l00083">systemState</a>, <a class="el" href="fb__eeprom_8h_source.html#l00050">SYSTEMSTATE</a>, <a class="el" href="fb__eeprom_8c_source.html#l00162">trigger_eeprom()</a>, <a class="el" href="fb__eeprom_8h_source.html#l00051">USERRAM_BASE_ADR</a>, and <a class="el" href="fb__eeprom_8h_source.html#l00052">USERRAM_SIZE</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00594">A_Memory_Write()</a>, <a class="el" href="fb__prot_8c_source.html#l00375">A_PhysicalAddress_Write()</a>, and <a class="el" href="fb__relais__app_8c_source.html#l00554">switchObjects()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__eeprom_8h_af44d586826b8dd9074953e51cbe2a515_cgraph.png" border="0" usemap="#fb__eeprom_8h_af44d586826b8dd9074953e51cbe2a515_cgraph_map" alt=""></div>
<map name="fb__eeprom_8h_af44d586826b8dd9074953e51cbe2a515_cgraph_map" id="fb__eeprom_8h_af44d586826b8dd9074953e51cbe2a515_cgraph">
<area shape="rect" id="node3" href="msg__queue_8h.html#aadc5609c7a2263c8cae4ab0d8eae7c4d" title="Allocate a new message." alt="" coords="212,5,287,35"/><area shape="rect" id="node9" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="208,59,291,88"/><area shape="rect" id="node11" href="fb__eeprom_8c.html#ac92e88b86efd0e0e32beaee667bfc226" title="Start to write the first byte to eeprom." alt="" coords="196,112,303,141"/><area shape="rect" id="node5" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="353,5,431,35"/><area shape="rect" id="node7" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="480,5,533,35"/><area shape="rect" id="node13" href="fb__eeprom_8c.html#a6ab1e3cc3c300d12592e39648da8c022" title="Store on byte on eeprom." alt="" coords="359,112,425,141"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__eeprom_8h_af44d586826b8dd9074953e51cbe2a515_icgraph.png" border="0" usemap="#fb__eeprom_8h_af44d586826b8dd9074953e51cbe2a515_icgraph_map" alt=""></div>
<map name="fb__eeprom_8h_af44d586826b8dd9074953e51cbe2a515_icgraph_map" id="fb__eeprom_8h_af44d586826b8dd9074953e51cbe2a515_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf" title="Write recieved data to the eeprom." alt="" coords="221,5,344,35"/><area shape="rect" id="node5" href="fb__prot_8c.html#ac3b30c7591e51974ab895440929395c6" title="Set the received address as our new device address." alt="" coords="196,59,369,88"/><area shape="rect" id="node7" href="fb__relais__app_8c.html#aac9e4f65925a5a959cb5df9ed091b3b7" title="Switch the objects to state in portValue and save value to eeprom if necessary." alt="" coords="231,112,335,141"/><area shape="rect" id="node9" href="fb__relais__app_8c.html#aabc97de0ba2150af0af7d2ddb8293824" title="Function is called when microcontroller gets power or if the application must be..." alt="" coords="432,59,555,88"/><area shape="rect" id="node11" href="fb__relais__app_8c.html#a30773cfc4105728c9628fca36c8c7c20" title="Function is called if A_GroupValue_Write is received." alt="" coords="441,112,545,141"/><area shape="rect" id="node13" href="fb__relais__app_8c.html#a3cabe34d9b90083ff13af0188e622539" title="Timer1 is used as application timer." alt="" coords="419,165,568,195"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4106e144334e369c48eed9dfe23e593c"></a><!-- doxytag: member="fb_eeprom.h::eeprom_print" ref="a4106e144334e369c48eed9dfe23e593c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_print </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print the complete eeprom to DEBUG defined. </p>

<p>References <a class="el" href="fb__eeprom_8c_source.html#l00052">eeprom_cmds::addr</a>, <a class="el" href="freebus-debug_8h_source.html#l00068">DEBUG_NEWLINE_BLOCKING</a>, <a class="el" href="freebus-debug_8h_source.html#l00054">DEBUG_PUTC_BLOCKING</a>, <a class="el" href="freebus-debug_8h_source.html#l00064">DEBUG_PUTHEX_BLOCKING</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00062">eeprom_NodeParam</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00967">fbprot_Init()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__eeprom_8h_a4106e144334e369c48eed9dfe23e593c_icgraph.png" border="0" usemap="#fb__eeprom_8h_a4106e144334e369c48eed9dfe23e593c_icgraph_map" alt=""></div>
<map name="fb__eeprom_8h_a4106e144334e369c48eed9dfe23e593c_icgraph_map" id="fb__eeprom_8h_a4106e144334e369c48eed9dfe23e593c_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b" title="Read configuration from eeprom is existant or set default values and write them to..." alt="" coords="153,5,231,35"/><area shape="rect" id="node5" href="fb__in8__app_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the..." alt="" coords="280,5,331,35"/></map>
</div>
</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
