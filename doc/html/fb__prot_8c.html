<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FreeBusAVR: lib/fb_prot.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lib/fb_prot.c File Reference</h1>
<p>Handle all requests which are EIB bases like write current address or group address.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="fb_8h_source.html">fb.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fb__hardware_8h_source.html">fb_hardware.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="freebus-debug_8h_source.html">freebus-debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fb__eeprom_8h_source.html">fb_eeprom.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fb__app_8h_source.html">fb_app.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fb__hal_8h_source.html">fb_hal.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fb__prot_8h_source.html">fb_prot.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for fb_prot.c:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c__incl.png" border="0" usemap="#lib_2fb__prot_8c_map" alt=""/></div>
<map name="lib_2fb__prot_8c_map" id="lib_2fb__prot_8c">
<area shape="rect" id="node3" href="fb_8h.html" title="Define general values used in bus communication." alt="" coords="24,160,67,189"/><area shape="rect" id="node5" href="fb__hardware_8h.html" title="Hardware specific options which includes the platforms (like ATmega8, ATmega168...." alt="" coords="12,237,114,267"/><area shape="rect" id="node7" href="freebus-debug_8h.html" title="Header file to map debugging between several output devices. Possible outputs are..." alt="" coords="390,83,504,112"/><area shape="rect" id="node15" href="fb__eeprom_8h.html" title="Handling the access and mapping to the eeprom." alt="" coords="528,83,622,112"/><area shape="rect" id="node17" href="fb__app_8h.html" title="General application definition file." alt="" coords="175,83,244,112"/><area shape="rect" id="node22" href="fb__hal_8h.html" title="Definitions on Hardware Abstration Layer." alt="" coords="268,83,335,112"/><area shape="rect" id="node29" href="fb__prot_8h.html" title="Define the protocol specific definitions Implementation of the communication protocol..." alt="" coords="79,83,151,112"/><area shape="rect" id="node11" href="lcd-lib_8h.html" title="lcd&#45;lib.h" alt="" coords="558,160,624,189"/><area shape="rect" id="node13" href="delay_8h.html" title="Functions to delay the execution." alt="" coords="559,237,623,267"/><area shape="rect" id="node19" href="msg__queue_8h.html" title="Definitions for the message queue system used for telegrams and communucation like..." alt="" coords="91,160,190,189"/></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfb__cmd.html">fb_cmd</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">structure which saves all EIB commands  <a href="structfb__cmd.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structucd__stat.html">ucd_stat</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Track status of connections if connection is opened with T_Connect_Req.  <a href="structucd__stat.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#ad01f913d138227e2b4fc4dd2ca904f07">MSG_MUL</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Multicast address, one-to-many, connection-less.  <a href="#ad01f913d138227e2b4fc4dd2ca904f07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a13b38c2f32cb6fdf9e18f62e5dce75c6">MSG_BRC</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;7)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Broadcast adress, one-to-all conenction-less.  <a href="#a13b38c2f32cb6fdf9e18f62e5dce75c6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#af4b7d60452ebd8d0355291bd3b720e39">MSG_DAF</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Direct adressing, one-to-one.  <a href="#af4b7d60452ebd8d0355291bd3b720e39"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#ab3b0799fb79aec4bb06d92b4770139f9">MSG_GRP</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;6)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Group adress.  <a href="#ab3b0799fb79aec4bb06d92b4770139f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a253031b1534db6709a48eb59e440b801">MSG_CON</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;5)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">connect request  <a href="#a253031b1534db6709a48eb59e440b801"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#ac7d0d9a9ace91de05ac02191bd7a1aa8">MSG_DIS</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">disconnect request  <a href="#ac7d0d9a9ace91de05ac02191bd7a1aa8"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#aaec72f885e36952a75395779cf20d684">read_grp_addr</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the group addresses from the eeprom and save them in the struct grp_addr.  <a href="#aaec72f885e36952a75395779cf20d684"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a1ca66f4c62a2c7c7ff2c8ebef64465da">fb_new_msg</a> (uint8_t *dest, uint8_t payload_len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new telegram and and return pointer to it.  <a href="#a1ca66f4c62a2c7c7ff2c8ebef64465da"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#ac3b30c7591e51974ab895440929395c6">A_PhysicalAddress_Write</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the received address as our new device address.  <a href="#ac3b30c7591e51974ab895440929395c6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#ae42ed05d4ccf0a841bdaa32fe7af4478">A_PhysicalAddress_Read</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the address of the device.  <a href="#ae42ed05d4ccf0a841bdaa32fe7af4478"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a3b317425f1358ea37c8fca124e29c277">T_Connect_Req</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called to start a connection to a physical address.  <a href="#a3b317425f1358ea37c8fca124e29c277"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a0675ad49aa389619806157f585c466ee">T_Disconnect_Req</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release the transport connection.  <a href="#a0675ad49aa389619806157f585c466ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a440973c20d3055721521a359aee68536">ncd_resp</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sicherungslayer.  <a href="#a440973c20d3055721521a359aee68536"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a37d55968595e78e21dc1dba21418acf4">A_DeviceDescriptor_Read</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is called if information for the BCU type is requested.  <a href="#a37d55968595e78e21dc1dba21418acf4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c">A_Memory_Read</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data from eeprom and return send it as telegram back to the requester.  <a href="#af2931210aae10a2c39698d2f1fb3c98c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf">A_Memory_Write</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write recieved data to the eeprom.  <a href="#afae8acdc71d1ebff494c621459c097cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a4a0be801ed4f2d9b2cbce548adf56a76">A_ADC_Read</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the values from the ADC converter.  <a href="#a4a0be801ed4f2d9b2cbce548adf56a76"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a088341f3603f5de9eb4817a8199391c6">A_Restart</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Restart the program on the microcontroller.  <a href="#a088341f3603f5de9eb4817a8199391c6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a5928e9483083ad86d6c82f0b0ca533af">Ignore</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send aknowledge to certain message.  <a href="#a5928e9483083ad86d6c82f0b0ca533af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#ae56aada1e48493023c8f3ecf7a1e71a7">A_GroupValue_Read</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A read request to the application.  <a href="#ae56aada1e48493023c8f3ecf7a1e71a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#abb5d4fc672e3e3e123f5f3e6e9f901e3">A_GroupValue_Write</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is called if a broadcast is received with a matching group address (eg.  <a href="#abb5d4fc672e3e3e123f5f3e6e9f901e3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#af4f820be8f1240cee6515133062a2e93">check_addr</a> (struct <a class="el" href="structfbus__hdr.html">fbus_hdr</a> *hdr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Analyse the type of the message (broadcast, direct, group address) and check for physical and group address if the telegram is for us.  <a href="#af4f820be8f1240cee6515133062a2e93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#ade80ef84f4f14d25a2283b43d9c1a54f">sendExtTelegram</a> (uint8_t commObjectNumber, uint8_t value, uint8_t offset)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send telegram as response to signal current state of the port to other devices.  <a href="#ade80ef84f4f14d25a2283b43d9c1a54f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a990a78673785da5bb024bfaf60e0984a">sendTelegram</a> (uint8_t commObjectNumber, uint8_t value, uint8_t offset)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send telegram as response to signal current state of the port to other devices.  <a href="#a990a78673785da5bb024bfaf60e0984a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#ac5c589c547e7f53fb4b2c9bbbbe8797a">findRespondGroupAddressByObjectNumber</a> (uint8_t commObjectNumber, uint8_t offset)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Search through group address list and return the matching position of a group address which is an response address link.  <a href="#ac5c589c547e7f53fb4b2c9bbbbe8797a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a3b07c15a969dbc529bb64de840ea56eb">fb_handlemsg</a> (struct <a class="el" href="structmsg.html">msg</a> *rxmsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">That function will be called if a telegram was received completely.  <a href="#a3b07c15a969dbc529bb64de840ea56eb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b">fbprot_Init</a> (const <a class="el" href="structSTRUCT__DEFPARAM.html">STRUCT_DEFPARAM</a> *pParam)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read configuration from eeprom is existant or set default values and write them to the eeprom.  <a href="#a3e2ec796b82409111b3a88a764b17e4b"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgrp__addr__s.html">grp_addr_s</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#aae3c982e005b9e0659d533393720a7f8">grp_addr</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of saved group addresses for this controller, see struct <a class="el" href="structgrp__addr__s.html" title="Structure for the group addresses.">grp_addr_s</a> for more information.  <a href="#aae3c982e005b9e0659d533393720a7f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structucd__stat.html">ucd_stat</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#a5299818938807c9ebc199b66cbc01958">ucd</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used to track transport connections, for this source address, status and counter is saved.  <a href="#a5299818938807c9ebc199b66cbc01958"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfb__cmd.html">fb_cmd</a> bus_cmds[]&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__prot_8c.html#ab1cd66b780fee6c2be823928c720a129">PROGMEM</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store mapping of function with parameters called by bus memebers.  <a href="#ab1cd66b780fee6c2be823928c720a129"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Handle all requests which are EIB bases like write current address or group address. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Dirk Opfer, Matthias Fechner, Christian Bode </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Fri Oct 26 18:14:05 2007</dd></dl>
<p>Description of a telegram:</p>
<ul>
<li>A telegram consists of the following bytes:<ol type="a">
<li>8-bit: controll byte</li>
<li>16-bit: source address</li>
<li>16-bit: destination address</li>
<li>3-bit: routing counter</li>
<li>4-bit: length of user data</li>
<li>2-16 byte: user data</li>
<li>8-bit: CRC byte</li>
</ol>
</li>
<li>Each byte is build up in the following way: S01234567PS<ol type="a">
<li>S=Start bit (always 1)</li>
<li>0=data bit (LSB)</li>
<li>1-6=data</li>
<li>7=data (MSB)</li>
<li>P=parity bit</li>
<li>S=stop bit (always 1)</li>
</ol>
</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000103">Todo:</a></b></dt><dd><p class="startdd">Hier sollten die Bezeichnungen (apdu, ...) noch mal überarbeitet werden. Ziel sollte es sein diese aus der Spec zu entnehmen. </p>
<p>Reduce debugging again. </p>
<p class="enddd">Handle group address zero which is a broadcast to all devices. </p>
</dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a13b38c2f32cb6fdf9e18f62e5dce75c6"></a><!-- doxytag: member="fb_prot.c::MSG_BRC" ref="a13b38c2f32cb6fdf9e18f62e5dce75c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_BRC&nbsp;&nbsp;&nbsp;(1&lt;&lt;7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Broadcast adress, one-to-all conenction-less. </p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00786">check_addr()</a>.</p>

</div>
</div>
<a class="anchor" id="a253031b1534db6709a48eb59e440b801"></a><!-- doxytag: member="fb_prot.c::MSG_CON" ref="a253031b1534db6709a48eb59e440b801" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_CON&nbsp;&nbsp;&nbsp;(1&lt;&lt;5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>connect request </p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00786">check_addr()</a>.</p>

</div>
</div>
<a class="anchor" id="af4b7d60452ebd8d0355291bd3b720e39"></a><!-- doxytag: member="fb_prot.c::MSG_DAF" ref="af4b7d60452ebd8d0355291bd3b720e39" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_DAF&nbsp;&nbsp;&nbsp;(1&lt;&lt;1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Direct adressing, one-to-one. </p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00786">check_addr()</a>.</p>

</div>
</div>
<a class="anchor" id="ac7d0d9a9ace91de05ac02191bd7a1aa8"></a><!-- doxytag: member="fb_prot.c::MSG_DIS" ref="ac7d0d9a9ace91de05ac02191bd7a1aa8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_DIS&nbsp;&nbsp;&nbsp;(1&lt;&lt;4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>disconnect request </p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00786">check_addr()</a>.</p>

</div>
</div>
<a class="anchor" id="ab3b0799fb79aec4bb06d92b4770139f9"></a><!-- doxytag: member="fb_prot.c::MSG_GRP" ref="ab3b0799fb79aec4bb06d92b4770139f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_GRP&nbsp;&nbsp;&nbsp;(1&lt;&lt;6)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Group adress. </p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00786">check_addr()</a>.</p>

</div>
</div>
<a class="anchor" id="ad01f913d138227e2b4fc4dd2ca904f07"></a><!-- doxytag: member="fb_prot.c::MSG_MUL" ref="ad01f913d138227e2b4fc4dd2ca904f07" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_MUL&nbsp;&nbsp;&nbsp;(1&lt;&lt;1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Multicast address, one-to-many, connection-less. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a4a0be801ed4f2d9b2cbce548adf56a76"></a><!-- doxytag: member="fb_prot.c::A_ADC_Read" ref="a4a0be801ed4f2d9b2cbce548adf56a76" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t A_ADC_Read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the values from the ADC converter. </p>
<p>We don't have that so it is only a dummy to speed up programming and reading of the devices.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00102">fbus_hdr::apci</a>, <a class="el" href="fb__prot_8c_source.html#l00084">ucd_stat::count</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb__hal_8c_source.html#l00983">fb_hal_txqueue_msg()</a>, <a class="el" href="fb__prot_8c_source.html#l00331">fb_new_msg()</a>, <a class="el" href="fb_8h_source.html#l00030">FB_NONE</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, <a class="el" href="fb__prot_8c_source.html#l00480">ncd_resp()</a>, <a class="el" href="fb__prot_8h_source.html#l00100">fbus_hdr::npci</a>, <a class="el" href="fb__prot_8h_source.html#l00098">fbus_hdr::src</a>, <a class="el" href="fb__prot_8h_source.html#l00101">fbus_hdr::tpci</a>, and <a class="el" href="fb__prot_8c_source.html#l00091">ucd</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a4a0be801ed4f2d9b2cbce548adf56a76_cgraph.png" border="0" usemap="#fb__prot_8c_a4a0be801ed4f2d9b2cbce548adf56a76_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a4a0be801ed4f2d9b2cbce548adf56a76_cgraph_map" id="fb__prot_8c_a4a0be801ed4f2d9b2cbce548adf56a76_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca" title="Read data from the eeprom cache and return it." alt="" coords="159,5,297,35"/><area shape="rect" id="node5" href="fb__hal_8h.html#af70a4606fe5ce0777a371e0c6c3540fb" title="Queue message for sending." alt="" coords="347,84,488,113"/><area shape="rect" id="node17" href="fb__prot_8c.html#a1ca66f4c62a2c7c7ff2c8ebef64465da" title="Create a new telegram and and return pointer to it." alt="" coords="371,176,464,205"/><area shape="rect" id="node23" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="181,163,275,192"/><area shape="rect" id="node25" href="fb__prot_8c.html#a440973c20d3055721521a359aee68536" title="Sicherungslayer." alt="" coords="191,109,265,139"/><area shape="rect" id="node7" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="539,109,621,139"/><area shape="rect" id="node9" href="fb__hal_8c.html#abc433410f75bf996dab8e7fa672205c0" title="Function is called from message queue system to trigger the interrupt for transmitting..." alt="" coords="537,56,623,85"/><area shape="rect" id="node11" href="fb__hal_8c.html#a8155185b5b41794d6ead2aba9870b9fa" title="Generate the telegram checksum and copy the next octet to send to fb_frame." alt="" coords="673,56,772,85"/><area shape="rect" id="node13" href="fb__hal_8c.html#a5a622f74cb37183309cbf6a3678fb129" title="Generate an EIB frame and calculate the checksum." alt="" coords="840,29,904,59"/><area shape="rect" id="node15" href="fb__hal_8c.html#aa4a5a78d404751d2731d41c606c430fc" title="Set the next state in sending mode." alt="" coords="821,83,923,112"/><area shape="rect" id="node19" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="541,176,619,205"/><area shape="rect" id="node21" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="696,176,749,205"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a37d55968595e78e21dc1dba21418acf4"></a><!-- doxytag: member="fb_prot.c::A_DeviceDescriptor_Read" ref="a37d55968595e78e21dc1dba21418acf4" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t A_DeviceDescriptor_Read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Is called if information for the BCU type is requested. </p>
<p>Function triggers a send which return information about the BCU.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td>Pointer to received telegram</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>FB_ACK: everything is fine, FB_NONE: Response telegram could not be created </dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00102">fbus_hdr::apci</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb__hal_8c_source.html#l00983">fb_hal_txqueue_msg()</a>, <a class="el" href="fb__prot_8c_source.html#l00331">fb_new_msg()</a>, <a class="el" href="fb_8h_source.html#l00030">FB_NONE</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, <a class="el" href="fb__prot_8c_source.html#l00480">ncd_resp()</a>, <a class="el" href="fb__prot_8h_source.html#l00100">fbus_hdr::npci</a>, <a class="el" href="fb__prot_8h_source.html#l00098">fbus_hdr::src</a>, and <a class="el" href="fb__prot_8h_source.html#l00101">fbus_hdr::tpci</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a37d55968595e78e21dc1dba21418acf4_cgraph.png" border="0" usemap="#fb__prot_8c_a37d55968595e78e21dc1dba21418acf4_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a37d55968595e78e21dc1dba21418acf4_cgraph_map" id="fb__prot_8c_a37d55968595e78e21dc1dba21418acf4_cgraph">
<area shape="rect" id="node3" href="fb__hal_8h.html#af70a4606fe5ce0777a371e0c6c3540fb" title="Queue message for sending." alt="" coords="371,60,512,89"/><area shape="rect" id="node15" href="fb__prot_8c.html#a1ca66f4c62a2c7c7ff2c8ebef64465da" title="Create a new telegram and and return pointer to it." alt="" coords="395,152,488,181"/><area shape="rect" id="node21" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="228,139,321,168"/><area shape="rect" id="node23" href="fb__prot_8c.html#a440973c20d3055721521a359aee68536" title="Sicherungslayer." alt="" coords="237,85,312,115"/><area shape="rect" id="node5" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="563,85,645,115"/><area shape="rect" id="node7" href="fb__hal_8c.html#abc433410f75bf996dab8e7fa672205c0" title="Function is called from message queue system to trigger the interrupt for transmitting..." alt="" coords="561,32,647,61"/><area shape="rect" id="node9" href="fb__hal_8c.html#a8155185b5b41794d6ead2aba9870b9fa" title="Generate the telegram checksum and copy the next octet to send to fb_frame." alt="" coords="697,32,796,61"/><area shape="rect" id="node11" href="fb__hal_8c.html#a5a622f74cb37183309cbf6a3678fb129" title="Generate an EIB frame and calculate the checksum." alt="" coords="864,5,928,35"/><area shape="rect" id="node13" href="fb__hal_8c.html#aa4a5a78d404751d2731d41c606c430fc" title="Set the next state in sending mode." alt="" coords="845,59,947,88"/><area shape="rect" id="node17" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="565,152,643,181"/><area shape="rect" id="node19" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="720,152,773,181"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae56aada1e48493023c8f3ecf7a1e71a7"></a><!-- doxytag: member="fb_prot.c::A_GroupValue_Read" ref="ae56aada1e48493023c8f3ecf7a1e71a7" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t A_GroupValue_Read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A read request to the application. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00077">APPLICATION_RUN_STATUS</a>, <a class="el" href="freebus-debug_8h_source.html#l00066">DEBUG_NEWLINE</a>, <a class="el" href="freebus-debug_8h_source.html#l00056">DEBUG_PUTS</a>, <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb_8h_source.html#l00032">FB_NACK</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, and <a class="el" href="fb__2-dimmer__app_8c_source.html#l00261">readApplication()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_ae56aada1e48493023c8f3ecf7a1e71a7_cgraph.png" border="0" usemap="#fb__prot_8c_ae56aada1e48493023c8f3ecf7a1e71a7_cgraph_map" alt=""></div>
<map name="fb__prot_8c_ae56aada1e48493023c8f3ecf7a1e71a7_cgraph_map" id="fb__prot_8c_ae56aada1e48493023c8f3ecf7a1e71a7_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca" title="Read data from the eeprom cache and return it." alt="" coords="199,5,337,35"/><area shape="rect" id="node5" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="221,59,315,88"/><area shape="rect" id="node7" href="fb__2-dimmer__app_8c.html#acdb92216340d9fc010cc12bbb44bbfb2" title="Read status from port and return it." alt="" coords="213,112,323,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abb5d4fc672e3e3e123f5f3e6e9f901e3"></a><!-- doxytag: member="fb_prot.c::A_GroupValue_Write" ref="abb5d4fc672e3e3e123f5f3e6e9f901e3" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t A_GroupValue_Write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Is called if a broadcast is received with a matching group address (eg. </p>
<p>button is pressed to switch relais on or off).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000108">Todo:</a></b></dt><dd>handle message shorter then 6-bit</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00077">APPLICATION_RUN_STATUS</a>, <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb_8h_source.html#l00032">FB_NACK</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, and <a class="el" href="fb__2-dimmer__app_8c_source.html#l00340">runApplication()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_abb5d4fc672e3e3e123f5f3e6e9f901e3_cgraph.png" border="0" usemap="#fb__prot_8c_abb5d4fc672e3e3e123f5f3e6e9f901e3_cgraph_map" alt=""></div>
<map name="fb__prot_8c_abb5d4fc672e3e3e123f5f3e6e9f901e3_cgraph_map" id="fb__prot_8c_abb5d4fc672e3e3e123f5f3e6e9f901e3_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca" title="Read data from the eeprom cache and return it." alt="" coords="199,5,337,35"/><area shape="rect" id="node5" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="221,59,315,88"/><area shape="rect" id="node7" href="fb__2-dimmer__app_8c.html#a30773cfc4105728c9628fca36c8c7c20" title="Function is called if A_GroupValue_Write is received it is the function &quot;EIS1&quot;..." alt="" coords="216,112,320,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af2931210aae10a2c39698d2f1fb3c98c"></a><!-- doxytag: member="fb_prot.c::A_Memory_Read" ref="af2931210aae10a2c39698d2f1fb3c98c" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t A_Memory_Read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read data from eeprom and return send it as telegram back to the requester. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00102">fbus_hdr::apci</a>, <a class="el" href="fb__prot_8c_source.html#l00084">ucd_stat::count</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb__hal_8c_source.html#l00983">fb_hal_txqueue_msg()</a>, <a class="el" href="fb__prot_8c_source.html#l00331">fb_new_msg()</a>, <a class="el" href="fb_8h_source.html#l00030">FB_NONE</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, <a class="el" href="msg__queue_8h_source.html#l00069">msg::len</a>, <a class="el" href="fb__prot_8c_source.html#l00480">ncd_resp()</a>, <a class="el" href="fb__prot_8h_source.html#l00100">fbus_hdr::npci</a>, <a class="el" href="fb__prot_8h_source.html#l00098">fbus_hdr::src</a>, <a class="el" href="fb__prot_8h_source.html#l00101">fbus_hdr::tpci</a>, and <a class="el" href="fb__prot_8c_source.html#l00091">ucd</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_af2931210aae10a2c39698d2f1fb3c98c_cgraph.png" border="0" usemap="#fb__prot_8c_af2931210aae10a2c39698d2f1fb3c98c_cgraph_map" alt=""></div>
<map name="fb__prot_8c_af2931210aae10a2c39698d2f1fb3c98c_cgraph_map" id="fb__prot_8c_af2931210aae10a2c39698d2f1fb3c98c_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca" title="Read data from the eeprom cache and return it." alt="" coords="177,5,316,35"/><area shape="rect" id="node5" href="fb__hal_8h.html#af70a4606fe5ce0777a371e0c6c3540fb" title="Queue message for sending." alt="" coords="365,84,507,113"/><area shape="rect" id="node17" href="fb__prot_8c.html#a1ca66f4c62a2c7c7ff2c8ebef64465da" title="Create a new telegram and and return pointer to it." alt="" coords="389,176,483,205"/><area shape="rect" id="node23" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="200,163,293,192"/><area shape="rect" id="node25" href="fb__prot_8c.html#a440973c20d3055721521a359aee68536" title="Sicherungslayer." alt="" coords="209,109,284,139"/><area shape="rect" id="node7" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="557,109,640,139"/><area shape="rect" id="node9" href="fb__hal_8c.html#abc433410f75bf996dab8e7fa672205c0" title="Function is called from message queue system to trigger the interrupt for transmitting..." alt="" coords="556,56,641,85"/><area shape="rect" id="node11" href="fb__hal_8c.html#a8155185b5b41794d6ead2aba9870b9fa" title="Generate the telegram checksum and copy the next octet to send to fb_frame." alt="" coords="692,56,791,85"/><area shape="rect" id="node13" href="fb__hal_8c.html#a5a622f74cb37183309cbf6a3678fb129" title="Generate an EIB frame and calculate the checksum." alt="" coords="859,29,923,59"/><area shape="rect" id="node15" href="fb__hal_8c.html#aa4a5a78d404751d2731d41c606c430fc" title="Set the next state in sending mode." alt="" coords="840,83,941,112"/><area shape="rect" id="node19" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="560,176,637,205"/><area shape="rect" id="node21" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="715,176,768,205"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afae8acdc71d1ebff494c621459c097cf"></a><!-- doxytag: member="fb_prot.c::A_Memory_Write" ref="afae8acdc71d1ebff494c621459c097cf" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t A_Memory_Write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write recieved data to the eeprom. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00102">fbus_hdr::apci</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb__eeprom_8c_source.html#l00233">eeprom_ParamWrite()</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, and <a class="el" href="fb__prot_8c_source.html#l00480">ncd_resp()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_afae8acdc71d1ebff494c621459c097cf_cgraph.png" border="0" usemap="#fb__prot_8c_afae8acdc71d1ebff494c621459c097cf_cgraph_map" alt=""></div>
<map name="fb__prot_8c_afae8acdc71d1ebff494c621459c097cf_cgraph_map" id="fb__prot_8c_afae8acdc71d1ebff494c621459c097cf_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#af44d586826b8dd9074953e51cbe2a515" title="Write data to the eeprom cache and trigger background process to write eeprom cache..." alt="" coords="176,84,317,113"/><area shape="rect" id="node17" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="200,216,293,245"/><area shape="rect" id="node19" href="fb__prot_8c.html#a440973c20d3055721521a359aee68536" title="Sicherungslayer." alt="" coords="209,163,284,192"/><area shape="rect" id="node5" href="msg__queue_8h.html#aadc5609c7a2263c8cae4ab0d8eae7c4d" title="Allocate a new message." alt="" coords="399,59,473,88"/><area shape="rect" id="node11" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="557,151,640,180"/><area shape="rect" id="node13" href="fb__eeprom_8c.html#ac92e88b86efd0e0e32beaee667bfc226" title="Start to write the first byte to eeprom." alt="" coords="383,5,489,35"/><area shape="rect" id="node7" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="560,72,637,101"/><area shape="rect" id="node9" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="715,72,768,101"/><area shape="rect" id="node15" href="fb__eeprom_8c.html#a6ab1e3cc3c300d12592e39648da8c022" title="Store on byte on eeprom." alt="" coords="565,5,632,35"/><area shape="rect" id="node21" href="fb__hal_8h.html#af70a4606fe5ce0777a371e0c6c3540fb" title="Queue message for sending." alt="" coords="365,216,507,245"/><area shape="rect" id="node32" href="fb__prot_8c.html#a1ca66f4c62a2c7c7ff2c8ebef64465da" title="Create a new telegram and and return pointer to it." alt="" coords="389,163,483,192"/><area shape="rect" id="node24" href="fb__hal_8c.html#abc433410f75bf996dab8e7fa672205c0" title="Function is called from message queue system to trigger the interrupt for transmitting..." alt="" coords="556,216,641,245"/><area shape="rect" id="node26" href="fb__hal_8c.html#a8155185b5b41794d6ead2aba9870b9fa" title="Generate the telegram checksum and copy the next octet to send to fb_frame." alt="" coords="692,216,791,245"/><area shape="rect" id="node28" href="fb__hal_8c.html#a5a622f74cb37183309cbf6a3678fb129" title="Generate an EIB frame and calculate the checksum." alt="" coords="859,189,923,219"/><area shape="rect" id="node30" href="fb__hal_8c.html#aa4a5a78d404751d2731d41c606c430fc" title="Set the next state in sending mode." alt="" coords="840,243,941,272"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae42ed05d4ccf0a841bdaa32fe7af4478"></a><!-- doxytag: member="fb_prot.c::A_PhysicalAddress_Read" ref="ae42ed05d4ccf0a841bdaa32fe7af4478" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t A_PhysicalAddress_Read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the address of the device. </p>
<p>The device must be in programming mode for this. Only one device can be in programming mode. See 3.2.2 in EIB specification</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00102">fbus_hdr::apci</a>, <a class="el" href="fb__prot_8h_source.html#l00097">fbus_hdr::ctrl</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="freebus-debug_8h_source.html#l00066">DEBUG_NEWLINE</a>, <a class="el" href="freebus-debug_8h_source.html#l00056">DEBUG_PUTS</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb__hal_8c_source.html#l00983">fb_hal_txqueue_msg()</a>, <a class="el" href="fb__prot_8c_source.html#l00331">fb_new_msg()</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, <a class="el" href="fb_8h_source.html#l00041">SS_PROG</a>, <a class="el" href="fb__hal_8h_source.html#l00083">systemState</a>, and <a class="el" href="fb__prot_8h_source.html#l00101">fbus_hdr::tpci</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_ae42ed05d4ccf0a841bdaa32fe7af4478_cgraph.png" border="0" usemap="#fb__prot_8c_ae42ed05d4ccf0a841bdaa32fe7af4478_cgraph_map" alt=""></div>
<map name="fb__prot_8c_ae42ed05d4ccf0a841bdaa32fe7af4478_cgraph_map" id="fb__prot_8c_ae42ed05d4ccf0a841bdaa32fe7af4478_cgraph">
<area shape="rect" id="node3" href="fb__hal_8h.html#af70a4606fe5ce0777a371e0c6c3540fb" title="Queue message for sending." alt="" coords="227,59,368,88"/><area shape="rect" id="node15" href="fb__prot_8c.html#a1ca66f4c62a2c7c7ff2c8ebef64465da" title="Create a new telegram and and return pointer to it." alt="" coords="251,112,344,141"/><area shape="rect" id="node21" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="251,165,344,195"/><area shape="rect" id="node5" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="419,5,501,35"/><area shape="rect" id="node7" href="fb__hal_8c.html#abc433410f75bf996dab8e7fa672205c0" title="Function is called from message queue system to trigger the interrupt for transmitting..." alt="" coords="417,59,503,88"/><area shape="rect" id="node9" href="fb__hal_8c.html#a8155185b5b41794d6ead2aba9870b9fa" title="Generate the telegram checksum and copy the next octet to send to fb_frame." alt="" coords="553,59,652,88"/><area shape="rect" id="node11" href="fb__hal_8c.html#a5a622f74cb37183309cbf6a3678fb129" title="Generate an EIB frame and calculate the checksum." alt="" coords="720,32,784,61"/><area shape="rect" id="node13" href="fb__hal_8c.html#aa4a5a78d404751d2731d41c606c430fc" title="Set the next state in sending mode." alt="" coords="701,85,803,115"/><area shape="rect" id="node17" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="421,112,499,141"/><area shape="rect" id="node19" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="576,112,629,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac3b30c7591e51974ab895440929395c6"></a><!-- doxytag: member="fb_prot.c::A_PhysicalAddress_Write" ref="ac3b30c7591e51974ab895440929395c6" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t A_PhysicalAddress_Write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the received address as our new device address. </p>
<p>For this function the device must be in programming mode. Only one device can be in programming mode. See 3.2.1 in EIB specification.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="freebus-debug_8h_source.html#l00066">DEBUG_NEWLINE</a>, <a class="el" href="freebus-debug_8h_source.html#l00056">DEBUG_PUTS</a>, <a class="el" href="fb__eeprom_8c_source.html#l00233">eeprom_ParamWrite()</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb_8h_source.html#l00030">FB_NONE</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, <a class="el" href="fb__prot_8h_source.html#l00109">pa</a>, <a class="el" href="fb__prot_8h_source.html#l00082">PA_ADDRESS_HIGH</a>, <a class="el" href="fb_8h_source.html#l00041">SS_PROG</a>, and <a class="el" href="fb__hal_8h_source.html#l00083">systemState</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_ac3b30c7591e51974ab895440929395c6_cgraph.png" border="0" usemap="#fb__prot_8c_ac3b30c7591e51974ab895440929395c6_cgraph_map" alt=""></div>
<map name="fb__prot_8c_ac3b30c7591e51974ab895440929395c6_cgraph_map" id="fb__prot_8c_ac3b30c7591e51974ab895440929395c6_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#af44d586826b8dd9074953e51cbe2a515" title="Write data to the eeprom cache and trigger background process to write eeprom cache..." alt="" coords="229,59,371,88"/><area shape="rect" id="node17" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="253,112,347,141"/><area shape="rect" id="node5" href="msg__queue_8h.html#aadc5609c7a2263c8cae4ab0d8eae7c4d" title="Allocate a new message." alt="" coords="436,5,511,35"/><area shape="rect" id="node11" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="432,59,515,88"/><area shape="rect" id="node13" href="fb__eeprom_8c.html#ac92e88b86efd0e0e32beaee667bfc226" title="Start to write the first byte to eeprom." alt="" coords="420,112,527,141"/><area shape="rect" id="node7" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="577,5,655,35"/><area shape="rect" id="node9" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="704,5,757,35"/><area shape="rect" id="node15" href="fb__eeprom_8c.html#a6ab1e3cc3c300d12592e39648da8c022" title="Store on byte on eeprom." alt="" coords="583,112,649,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a088341f3603f5de9eb4817a8199391c6"></a><!-- doxytag: member="fb_prot.c::A_Restart" ref="a088341f3603f5de9eb4817a8199391c6" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t A_Restart </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Restart the program on the microcontroller. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__eeprom_8c_source.html#l00284">eeprom_busy()</a>, and <a class="el" href="fb__hal_8c_source.html#l00327">fb_hal_restart()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a088341f3603f5de9eb4817a8199391c6_cgraph.png" border="0" usemap="#fb__prot_8c_a088341f3603f5de9eb4817a8199391c6_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a088341f3603f5de9eb4817a8199391c6_cgraph_map" id="fb__prot_8c_a088341f3603f5de9eb4817a8199391c6_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#a7bf612843223717f1d420610cbd12d6e" title="Check if eeprom cache was written completely to eeprom." alt="" coords="135,5,233,35"/><area shape="rect" id="node5" href="fb__hal_8h.html#a4111a79334fb10bc9c786f510256c20b" title="Restart the application by activating the watchdog and block the program." alt="" coords="135,59,233,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af4f820be8f1240cee6515133062a2e93"></a><!-- doxytag: member="fb_prot.c::check_addr" ref="af4f820be8f1240cee6515133062a2e93" args="(struct fbus_hdr *hdr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t check_addr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfbus__hdr.html">fbus_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Analyse the type of the message (broadcast, direct, group address) and check for physical and group address if the telegram is for us. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000109">Todo:</a></b></dt><dd>must we handle group address 0/0/0 here in a special way?</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hdr</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00091">grp_addr_s::count</a>, <a class="el" href="fb__prot_8h_source.html#l00099">fbus_hdr::dest</a>, <a class="el" href="fb__prot_8h_source.html#l00092">grp_addr_s::ga</a>, <a class="el" href="fb__prot_8c_source.html#l00090">grp_addr</a>, <a class="el" href="fb__prot_8c_source.html#l00064">MSG_BRC</a>, <a class="el" href="fb__prot_8c_source.html#l00067">MSG_CON</a>, <a class="el" href="fb__prot_8c_source.html#l00065">MSG_DAF</a>, <a class="el" href="fb__prot_8c_source.html#l00068">MSG_DIS</a>, <a class="el" href="fb__prot_8c_source.html#l00066">MSG_GRP</a>, <a class="el" href="fb__prot_8h_source.html#l00100">fbus_hdr::npci</a>, <a class="el" href="fb__prot_8h_source.html#l00109">pa</a>, <a class="el" href="fb__prot_8h_source.html#l00052">T_BROADCAST_DATA</a>, <a class="el" href="fb__prot_8h_source.html#l00053">T_BROADCAST_DATA_MASK</a>, <a class="el" href="fb__prot_8h_source.html#l00054">T_CONNECT_REQ</a>, <a class="el" href="fb__prot_8h_source.html#l00055">T_CONNECT_REQ_MASK</a>, <a class="el" href="fb__prot_8h_source.html#l00056">T_DISCONNECT_REQ</a>, <a class="el" href="fb__prot_8h_source.html#l00057">T_DISCONNECT_REQ_MASK</a>, and <a class="el" href="fb__prot_8h_source.html#l00101">fbus_hdr::tpci</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00849">fb_handlemsg()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_af4f820be8f1240cee6515133062a2e93_icgraph.png" border="0" usemap="#fb__prot_8c_af4f820be8f1240cee6515133062a2e93_icgraph_map" alt=""></div>
<map name="fb__prot_8c_af4f820be8f1240cee6515133062a2e93_icgraph_map" id="fb__prot_8c_af4f820be8f1240cee6515133062a2e93_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a3b07c15a969dbc529bb64de840ea56eb" title="That function will be called if a telegram was received completely." alt="" coords="145,5,247,35"/><area shape="rect" id="node5" href="fb__hal_8c.html#af44a3cacd6e2ffabfab5a4628b796a79" title="That function is called if the timeout of 384µs tiggered." alt="" coords="296,5,397,35"/><area shape="rect" id="node7" href="fb__hal_8c.html#add2d7cdddfb682dcc0391e60cf42c7d6" title="The ISR handles which function must be called." alt="" coords="445,5,488,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3b07c15a969dbc529bb64de840ea56eb"></a><!-- doxytag: member="fb_prot.c::fb_handlemsg" ref="a3b07c15a969dbc529bb64de840ea56eb" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t fb_handlemsg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>That function will be called if a telegram was received completely. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00102">fbus_hdr::apci</a>, <a class="el" href="fb__prot_8c_source.html#l00786">check_addr()</a>, <a class="el" href="fb__hal_8c_source.html#l00119">checksum</a>, <a class="el" href="fb__prot_8c_source.html#l00073">fb_cmd::cmd</a>, <a class="el" href="msg__queue_8h_source.html#l00053">COUNT_ARRAY_ELEMENTS</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="freebus-debug_8h_source.html#l00066">DEBUG_NEWLINE</a>, <a class="el" href="freebus-debug_8h_source.html#l00052">DEBUG_PUTC</a>, <a class="el" href="freebus-debug_8h_source.html#l00062">DEBUG_PUTHEX</a>, <a class="el" href="freebus-debug_8h_source.html#l00056">DEBUG_PUTS</a>, <a class="el" href="fb_8h_source.html#l00030">FB_NONE</a>, <a class="el" href="structfb__cmd.html#ab902de246a9c613b16fc041061cfa23e">fb_cmd::func</a>, <a class="el" href="msg__queue_8h_source.html#l00069">msg::len</a>, <a class="el" href="fb__prot_8c_source.html#l00074">fb_cmd::mask</a>, <a class="el" href="fb__prot_8c_source.html#l00076">fb_cmd::max_len</a>, <a class="el" href="fb__prot_8c_source.html#l00075">fb_cmd::min_len</a>, <a class="el" href="fb__prot_8h_source.html#l00100">fbus_hdr::npci</a>, <a class="el" href="fb__prot_8c_source.html#l00072">fb_cmd::state</a>, and <a class="el" href="fb__prot_8h_source.html#l00101">fbus_hdr::tpci</a>.</p>

<p>Referenced by <a class="el" href="fb__hal_8c_source.html#l00644">timer_timeout()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a3b07c15a969dbc529bb64de840ea56eb_cgraph.png" border="0" usemap="#fb__prot_8c_a3b07c15a969dbc529bb64de840ea56eb_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a3b07c15a969dbc529bb64de840ea56eb_cgraph_map" id="fb__prot_8c_a3b07c15a969dbc529bb64de840ea56eb_cgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#af4f820be8f1240cee6515133062a2e93" title="Analyse the type of the message (broadcast, direct, group address) and check for..." alt="" coords="159,5,247,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a3b07c15a969dbc529bb64de840ea56eb_icgraph.png" border="0" usemap="#fb__prot_8c_a3b07c15a969dbc529bb64de840ea56eb_icgraph_map" alt=""></div>
<map name="fb__prot_8c_a3b07c15a969dbc529bb64de840ea56eb_icgraph_map" id="fb__prot_8c_a3b07c15a969dbc529bb64de840ea56eb_icgraph">
<area shape="rect" id="node3" href="fb__hal_8c.html#af44a3cacd6e2ffabfab5a4628b796a79" title="That function is called if the timeout of 384µs tiggered." alt="" coords="157,5,259,35"/><area shape="rect" id="node5" href="fb__hal_8c.html#add2d7cdddfb682dcc0391e60cf42c7d6" title="The ISR handles which function must be called." alt="" coords="307,5,349,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1ca66f4c62a2c7c7ff2c8ebef64465da"></a><!-- doxytag: member="fb_prot.c::fb_new_msg" ref="a1ca66f4c62a2c7c7ff2c8ebef64465da" args="(uint8_t *dest, uint8_t payload_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structmsg.html">msg</a> * fb_new_msg </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>payload_len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new telegram and and return pointer to it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dest</em>&nbsp;</td><td>Pointer to the destination address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>payload_len</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="msg__queue_8c_source.html#l00061">AllocMsgI()</a>, <a class="el" href="fb__prot_8h_source.html#l00097">fbus_hdr::ctrl</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb__prot_8h_source.html#l00099">fbus_hdr::dest</a>, <a class="el" href="msg__queue_8h_source.html#l00069">msg::len</a>, <a class="el" href="fb__prot_8h_source.html#l00100">fbus_hdr::npci</a>, <a class="el" href="fb__prot_8h_source.html#l00109">pa</a>, <a class="el" href="msg__queue_8h_source.html#l00071">msg::repeat</a>, and <a class="el" href="fb__prot_8h_source.html#l00098">fbus_hdr::src</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00622">A_ADC_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00509">A_DeviceDescriptor_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00542">A_Memory_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00404">A_PhysicalAddress_Read()</a>, and <a class="el" href="fb__prot_8c_source.html#l00480">ncd_resp()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a1ca66f4c62a2c7c7ff2c8ebef64465da_cgraph.png" border="0" usemap="#fb__prot_8c_a1ca66f4c62a2c7c7ff2c8ebef64465da_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a1ca66f4c62a2c7c7ff2c8ebef64465da_cgraph_map" id="fb__prot_8c_a1ca66f4c62a2c7c7ff2c8ebef64465da_cgraph">
<area shape="rect" id="node3" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="151,5,228,35"/><area shape="rect" id="node5" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="277,5,331,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a1ca66f4c62a2c7c7ff2c8ebef64465da_icgraph.png" border="0" usemap="#fb__prot_8c_a1ca66f4c62a2c7c7ff2c8ebef64465da_icgraph_map" alt=""></div>
<map name="fb__prot_8c_a1ca66f4c62a2c7c7ff2c8ebef64465da_icgraph_map" id="fb__prot_8c_a1ca66f4c62a2c7c7ff2c8ebef64465da_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a4a0be801ed4f2d9b2cbce548adf56a76" title="Read the values from the ADC converter." alt="" coords="407,5,508,35"/><area shape="rect" id="node5" href="fb__prot_8c.html#a37d55968595e78e21dc1dba21418acf4" title="Is called if information for the BCU type is requested." alt="" coords="372,59,543,88"/><area shape="rect" id="node7" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c" title="Read data from eeprom and return send it as telegram back to the requester." alt="" coords="396,165,519,195"/><area shape="rect" id="node9" href="fb__prot_8c.html#ae42ed05d4ccf0a841bdaa32fe7af4478" title="Returns the address of the device." alt="" coords="149,215,323,244"/><area shape="rect" id="node11" href="fb__prot_8c.html#a440973c20d3055721521a359aee68536" title="Sicherungslayer." alt="" coords="199,111,273,140"/><area shape="rect" id="node16" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf" title="Write recieved data to the eeprom." alt="" coords="396,112,519,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3e2ec796b82409111b3a88a764b17e4b"></a><!-- doxytag: member="fb_prot.c::fbprot_Init" ref="a3e2ec796b82409111b3a88a764b17e4b" args="(const STRUCT_DEFPARAM *pParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fbprot_Init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structSTRUCT__DEFPARAM.html">STRUCT_DEFPARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>pParam</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read configuration from eeprom is existant or set default values and write them to the eeprom. </p>
<p>Configure and enable all interrupts. </p>

<p><p>&lt; </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000110">Todo:</a></b></dt><dd>do not save group addresses in memory, read it from eeprom to save memory. </dd></dl>
</p>

<p>References <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb__eeprom_8c_source.html#l00302">eeprom_ParamSetDefault()</a>, <a class="el" href="fb__eeprom_8c_source.html#l00356">eeprom_print()</a>, <a class="el" href="fb__prot_8h_source.html#l00109">pa</a>, <a class="el" href="fb__prot_8h_source.html#l00082">PA_ADDRESS_HIGH</a>, <a class="el" href="fb__prot_8h_source.html#l00083">PA_ADDRESS_LOW</a>, and <a class="el" href="fb__prot_8c_source.html#l00287">read_grp_addr()</a>.</p>

<p>Referenced by <a class="el" href="fb__in8__app_8c_source.html#l00870">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a3e2ec796b82409111b3a88a764b17e4b_cgraph.png" border="0" usemap="#fb__prot_8c_a3e2ec796b82409111b3a88a764b17e4b_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a3e2ec796b82409111b3a88a764b17e4b_cgraph_map" id="fb__prot_8c_a3e2ec796b82409111b3a88a764b17e4b_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca" title="Read data from the eeprom cache and return it." alt="" coords="353,111,492,140"/><area shape="rect" id="node5" href="fb__eeprom_8h.html#a7b1be2223a2fe16a4791caa396ca5253" title="store the default parameter directly to the eeprom" alt="" coords="133,5,304,35"/><area shape="rect" id="node9" href="fb__eeprom_8h.html#a4106e144334e369c48eed9dfe23e593c" title="Print the complete eeprom to DEBUG defined." alt="" coords="171,109,267,139"/><area shape="rect" id="node11" href="fb__prot_8c.html#aaec72f885e36952a75395779cf20d684" title="Read the group addresses from the eeprom and save them in the struct grp_addr." alt="" coords="167,163,271,192"/><area shape="rect" id="node7" href="fb__eeprom_8c.html#a6ab1e3cc3c300d12592e39648da8c022" title="Store on byte on eeprom." alt="" coords="389,5,456,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a3e2ec796b82409111b3a88a764b17e4b_icgraph.png" border="0" usemap="#fb__prot_8c_a3e2ec796b82409111b3a88a764b17e4b_icgraph_map" alt=""></div>
<map name="fb__prot_8c_a3e2ec796b82409111b3a88a764b17e4b_icgraph_map" id="fb__prot_8c_a3e2ec796b82409111b3a88a764b17e4b_icgraph">
<area shape="rect" id="node3" href="fb__in8__app_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the..." alt="" coords="133,5,184,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac5c589c547e7f53fb4b2c9bbbbe8797a"></a><!-- doxytag: member="fb_prot.c::findRespondGroupAddressByObjectNumber" ref="ac5c589c547e7f53fb4b2c9bbbbe8797a" args="(uint8_t commObjectNumber, uint8_t offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t findRespondGroupAddressByObjectNumber </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>commObjectNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Search through group address list and return the matching position of a group address which is an response address link. </p>
<p>If no group address found return 0.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>commObjectNumber</em>&nbsp;</td><td>The object of the group address (0-7) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Definition of offset for response addresses in EEPROM, 0x0C for 8-out</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Position in group address array grp_addr </dd></dl>

<p>References <a class="el" href="fb__prot_8h_source.html#l00079">ASSOCTABPTR</a>, <a class="el" href="fb__eeprom_8h_source.html#l00045">BASE_ADDRESS_OFFSET</a>, and <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00163">sendExtTelegram()</a>, and <a class="el" href="fb__prot_8c_source.html#l00210">sendTelegram()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_ac5c589c547e7f53fb4b2c9bbbbe8797a_cgraph.png" border="0" usemap="#fb__prot_8c_ac5c589c547e7f53fb4b2c9bbbbe8797a_cgraph_map" alt=""></div>
<map name="fb__prot_8c_ac5c589c547e7f53fb4b2c9bbbbe8797a_cgraph_map" id="fb__prot_8c_ac5c589c547e7f53fb4b2c9bbbbe8797a_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca" title="Read data from the eeprom cache and return it." alt="" coords="329,5,468,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_ac5c589c547e7f53fb4b2c9bbbbe8797a_icgraph.png" border="0" usemap="#fb__prot_8c_ac5c589c547e7f53fb4b2c9bbbbe8797a_icgraph_map" alt=""></div>
<map name="fb__prot_8c_ac5c589c547e7f53fb4b2c9bbbbe8797a_icgraph_map" id="fb__prot_8c_ac5c589c547e7f53fb4b2c9bbbbe8797a_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#ade80ef84f4f14d25a2283b43d9c1a54f" title="Send telegram as response to signal current state of the port to other devices." alt="" coords="328,5,451,35"/><area shape="rect" id="node5" href="fb__prot_8c.html#a990a78673785da5bb024bfaf60e0984a" title="Send telegram as response to signal current state of the port to other devices." alt="" coords="339,59,440,88"/><area shape="rect" id="node7" href="fb__in8__app_8c.html#a8d1473313842fe123fec771c086af269" title="Port Function: Jalousie." alt="" coords="500,7,628,36"/><area shape="rect" id="node9" href="fb__in8__app_8c.html#a3cabe34d9b90083ff13af0188e622539" title="Timer1 is used as application timer." alt="" coords="677,59,827,88"/><area shape="rect" id="node11" href="fb__in8__app_8c.html#a71a91b98ae9a796dac4ab23c7e3ff6d8" title="Port Function: switch." alt="" coords="504,111,624,140"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5928e9483083ad86d6c82f0b0ca533af"></a><!-- doxytag: member="fb_prot.c::Ignore" ref="a5928e9483083ad86d6c82f0b0ca533af" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t Ignore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send aknowledge to certain message. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000107">Todo:</a></b></dt><dd>Not implemented yet</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td>The received telegram</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 </dd></dl>

<p>References <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, and <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a5928e9483083ad86d6c82f0b0ca533af_cgraph.png" border="0" usemap="#fb__prot_8c_a5928e9483083ad86d6c82f0b0ca533af_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a5928e9483083ad86d6c82f0b0ca533af_cgraph_map" id="fb__prot_8c_a5928e9483083ad86d6c82f0b0ca533af_cgraph">
<area shape="rect" id="node3" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="113,5,207,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a440973c20d3055721521a359aee68536"></a><!-- doxytag: member="fb_prot.c::ncd_resp" ref="a440973c20d3055721521a359aee68536" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ncd_resp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sicherungslayer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td>pointer to currently received eib telegram </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb__hal_8c_source.html#l00983">fb_hal_txqueue_msg()</a>, <a class="el" href="fb__prot_8c_source.html#l00331">fb_new_msg()</a>, <a class="el" href="fb__prot_8h_source.html#l00100">fbus_hdr::npci</a>, <a class="el" href="fb__prot_8h_source.html#l00098">fbus_hdr::src</a>, and <a class="el" href="fb__prot_8h_source.html#l00101">fbus_hdr::tpci</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00622">A_ADC_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00509">A_DeviceDescriptor_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00542">A_Memory_Read()</a>, and <a class="el" href="fb__prot_8c_source.html#l00594">A_Memory_Write()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a440973c20d3055721521a359aee68536_cgraph.png" border="0" usemap="#fb__prot_8c_a440973c20d3055721521a359aee68536_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a440973c20d3055721521a359aee68536_cgraph_map" id="fb__prot_8c_a440973c20d3055721521a359aee68536_cgraph">
<area shape="rect" id="node3" href="fb__hal_8h.html#af70a4606fe5ce0777a371e0c6c3540fb" title="Queue message for sending." alt="" coords="128,59,269,88"/><area shape="rect" id="node15" href="fb__prot_8c.html#a1ca66f4c62a2c7c7ff2c8ebef64465da" title="Create a new telegram and and return pointer to it." alt="" coords="152,112,245,141"/><area shape="rect" id="node5" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="320,5,403,35"/><area shape="rect" id="node7" href="fb__hal_8c.html#abc433410f75bf996dab8e7fa672205c0" title="Function is called from message queue system to trigger the interrupt for transmitting..." alt="" coords="319,59,404,88"/><area shape="rect" id="node9" href="fb__hal_8c.html#a8155185b5b41794d6ead2aba9870b9fa" title="Generate the telegram checksum and copy the next octet to send to fb_frame." alt="" coords="455,59,553,88"/><area shape="rect" id="node11" href="fb__hal_8c.html#a5a622f74cb37183309cbf6a3678fb129" title="Generate an EIB frame and calculate the checksum." alt="" coords="621,32,685,61"/><area shape="rect" id="node13" href="fb__hal_8c.html#aa4a5a78d404751d2731d41c606c430fc" title="Set the next state in sending mode." alt="" coords="603,85,704,115"/><area shape="rect" id="node17" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="323,112,400,141"/><area shape="rect" id="node19" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="477,112,531,141"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a440973c20d3055721521a359aee68536_icgraph.png" border="0" usemap="#fb__prot_8c_a440973c20d3055721521a359aee68536_icgraph_map" alt=""></div>
<map name="fb__prot_8c_a440973c20d3055721521a359aee68536_icgraph_map" id="fb__prot_8c_a440973c20d3055721521a359aee68536_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a4a0be801ed4f2d9b2cbce548adf56a76" title="Read the values from the ADC converter." alt="" coords="164,5,265,35"/><area shape="rect" id="node5" href="fb__prot_8c.html#a37d55968595e78e21dc1dba21418acf4" title="Is called if information for the BCU type is requested." alt="" coords="129,59,300,88"/><area shape="rect" id="node7" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c" title="Read data from eeprom and return send it as telegram back to the requester." alt="" coords="153,112,276,141"/><area shape="rect" id="node9" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf" title="Write recieved data to the eeprom." alt="" coords="153,165,276,195"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaec72f885e36952a75395779cf20d684"></a><!-- doxytag: member="fb_prot.c::read_grp_addr" ref="aaec72f885e36952a75395779cf20d684" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void read_grp_addr </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the group addresses from the eeprom and save them in the struct grp_addr. </p>

<p>References <a class="el" href="fb__prot_8h_source.html#l00091">grp_addr_s::count</a>, <a class="el" href="fb__prot_8h_source.html#l00081">COUNT_GRP_ADDRESSES</a>, <a class="el" href="freebus-debug_8h_source.html#l00062">DEBUG_PUTHEX</a>, <a class="el" href="freebus-debug_8h_source.html#l00056">DEBUG_PUTS</a>, <a class="el" href="freebus-debug_8h_source.html#l00070">DEBUG_SPACE</a>, <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb_8h_source.html#l00037">FB_MAX_GROUP_ADDR</a>, <a class="el" href="fb__prot_8h_source.html#l00092">grp_addr_s::ga</a>, <a class="el" href="fb__prot_8c_source.html#l00090">grp_addr</a>, and <a class="el" href="fb__prot_8h_source.html#l00086">START_ADDRESS_GROUP_ADDRESSES</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00967">fbprot_Init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_aaec72f885e36952a75395779cf20d684_cgraph.png" border="0" usemap="#fb__prot_8c_aaec72f885e36952a75395779cf20d684_cgraph_map" alt=""></div>
<map name="fb__prot_8c_aaec72f885e36952a75395779cf20d684_cgraph_map" id="fb__prot_8c_aaec72f885e36952a75395779cf20d684_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca" title="Read data from the eeprom cache and return it." alt="" coords="159,5,297,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_aaec72f885e36952a75395779cf20d684_icgraph.png" border="0" usemap="#fb__prot_8c_aaec72f885e36952a75395779cf20d684_icgraph_map" alt=""></div>
<map name="fb__prot_8c_aaec72f885e36952a75395779cf20d684_icgraph_map" id="fb__prot_8c_aaec72f885e36952a75395779cf20d684_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b" title="Read configuration from eeprom is existant or set default values and write them to..." alt="" coords="159,5,236,35"/><area shape="rect" id="node5" href="fb__in8__app_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the..." alt="" coords="285,5,336,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ade80ef84f4f14d25a2283b43d9c1a54f"></a><!-- doxytag: member="fb_prot.c::sendExtTelegram" ref="ade80ef84f4f14d25a2283b43d9c1a54f" args="(uint8_t commObjectNumber, uint8_t value, uint8_t offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendExtTelegram </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>commObjectNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send telegram as response to signal current state of the port to other devices. </p>
<p>Only necessary if ports are switched inside a timer function.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000104">Todo:</a></b></dt><dd>what source address to send if object has several group addresses?</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>commObjectNumber</em>&nbsp;</td><td>which port was switched </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>1=switched on, 0=switched of </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Definition of offset for response addresses in EEPROM, 0x0C for 8-out </td></tr>
  </table>
  </dd>
</dl>

<p><p>&lt; </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000105">Todo:</a></b></dt><dd>that is application specific code maybe we should move it to another function </dd></dl>
</p>

<p>References <a class="el" href="msg__queue_8c_source.html#l00061">AllocMsgI()</a>, <a class="el" href="fb__prot_8h_source.html#l00102">fbus_hdr::apci</a>, <a class="el" href="fb__prot_8h_source.html#l00097">fbus_hdr::ctrl</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb__prot_8h_source.html#l00099">fbus_hdr::dest</a>, <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb__hal_8c_source.html#l00983">fb_hal_txqueue_msg()</a>, <a class="el" href="fb__prot_8c_source.html#l00251">findRespondGroupAddressByObjectNumber()</a>, <a class="el" href="fb__prot_8h_source.html#l00092">grp_addr_s::ga</a>, <a class="el" href="fb__prot_8c_source.html#l00090">grp_addr</a>, <a class="el" href="msg__queue_8h_source.html#l00069">msg::len</a>, <a class="el" href="fb__prot_8h_source.html#l00100">fbus_hdr::npci</a>, <a class="el" href="fb__prot_8h_source.html#l00082">PA_ADDRESS_HIGH</a>, <a class="el" href="fb__prot_8h_source.html#l00083">PA_ADDRESS_LOW</a>, <a class="el" href="msg__queue_8h_source.html#l00071">msg::repeat</a>, <a class="el" href="fb__prot_8h_source.html#l00098">fbus_hdr::src</a>, and <a class="el" href="fb__prot_8h_source.html#l00101">fbus_hdr::tpci</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_ade80ef84f4f14d25a2283b43d9c1a54f_cgraph.png" border="0" usemap="#fb__prot_8c_ade80ef84f4f14d25a2283b43d9c1a54f_cgraph_map" alt=""></div>
<map name="fb__prot_8c_ade80ef84f4f14d25a2283b43d9c1a54f_cgraph_map" id="fb__prot_8c_ade80ef84f4f14d25a2283b43d9c1a54f_cgraph">
<area shape="rect" id="node3" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="275,5,352,35"/><area shape="rect" id="node7" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca" title="Read data from the eeprom cache and return it." alt="" coords="500,71,639,100"/><area shape="rect" id="node9" href="fb__hal_8h.html#af70a4606fe5ce0777a371e0c6c3540fb" title="Queue message for sending." alt="" coords="243,163,384,192"/><area shape="rect" id="node21" href="fb__prot_8h.html#a313ffcd6f35f6b76ed97d80765dd9faf" title="Search through group address list and return the matching position of a group address..." alt="" coords="176,109,451,139"/><area shape="rect" id="node5" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="543,5,596,35"/><area shape="rect" id="node11" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="528,149,611,179"/><area shape="rect" id="node13" href="fb__hal_8c.html#abc433410f75bf996dab8e7fa672205c0" title="Function is called from message queue system to trigger the interrupt for transmitting..." alt="" coords="527,203,612,232"/><area shape="rect" id="node15" href="fb__hal_8c.html#a8155185b5b41794d6ead2aba9870b9fa" title="Generate the telegram checksum and copy the next octet to send to fb_frame." alt="" coords="689,203,788,232"/><area shape="rect" id="node17" href="fb__hal_8c.html#a5a622f74cb37183309cbf6a3678fb129" title="Generate an EIB frame and calculate the checksum." alt="" coords="856,176,920,205"/><area shape="rect" id="node19" href="fb__hal_8c.html#aa4a5a78d404751d2731d41c606c430fc" title="Set the next state in sending mode." alt="" coords="837,229,939,259"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a990a78673785da5bb024bfaf60e0984a"></a><!-- doxytag: member="fb_prot.c::sendTelegram" ref="a990a78673785da5bb024bfaf60e0984a" args="(uint8_t commObjectNumber, uint8_t value, uint8_t offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendTelegram </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>commObjectNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send telegram as response to signal current state of the port to other devices. </p>
<p>Only necessary if ports are switched inside a timer function.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000106">Todo:</a></b></dt><dd>what source address to send if object has several group addresses?</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>commObjectNumber</em>&nbsp;</td><td>which port was switched </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>1=switched on, 0=switched of </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Definition of offset for response addresses in EEPROM, 0x0C for 8-out </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="msg__queue_8c_source.html#l00061">AllocMsgI()</a>, <a class="el" href="fb__prot_8h_source.html#l00102">fbus_hdr::apci</a>, <a class="el" href="fb__prot_8h_source.html#l00097">fbus_hdr::ctrl</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb__prot_8h_source.html#l00099">fbus_hdr::dest</a>, <a class="el" href="fb__eeprom_8c_source.html#l00189">eeprom_ParamRead()</a>, <a class="el" href="fb__hal_8c_source.html#l00983">fb_hal_txqueue_msg()</a>, <a class="el" href="fb__prot_8c_source.html#l00251">findRespondGroupAddressByObjectNumber()</a>, <a class="el" href="fb__prot_8h_source.html#l00092">grp_addr_s::ga</a>, <a class="el" href="fb__prot_8c_source.html#l00090">grp_addr</a>, <a class="el" href="msg__queue_8h_source.html#l00069">msg::len</a>, <a class="el" href="fb__prot_8h_source.html#l00100">fbus_hdr::npci</a>, <a class="el" href="fb__prot_8h_source.html#l00082">PA_ADDRESS_HIGH</a>, <a class="el" href="fb__prot_8h_source.html#l00083">PA_ADDRESS_LOW</a>, <a class="el" href="msg__queue_8h_source.html#l00071">msg::repeat</a>, <a class="el" href="fb__prot_8h_source.html#l00098">fbus_hdr::src</a>, and <a class="el" href="fb__prot_8h_source.html#l00101">fbus_hdr::tpci</a>.</p>

<p>Referenced by <a class="el" href="fb__in8__app_8c_source.html#l00645">PortFunc_Jalousie()</a>, <a class="el" href="fb__in8__app_8c_source.html#l00497">PortFunc_Switch()</a>, and <a class="el" href="fb__in8__app_8c_source.html#l00181">timerOverflowFunction()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a990a78673785da5bb024bfaf60e0984a_cgraph.png" border="0" usemap="#fb__prot_8c_a990a78673785da5bb024bfaf60e0984a_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a990a78673785da5bb024bfaf60e0984a_cgraph_map" id="fb__prot_8c_a990a78673785da5bb024bfaf60e0984a_cgraph">
<area shape="rect" id="node3" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="256,5,333,35"/><area shape="rect" id="node7" href="fb__eeprom_8h.html#a93b2810dc3abdedaa3dfa772943fb5ca" title="Read data from the eeprom cache and return it." alt="" coords="481,71,620,100"/><area shape="rect" id="node9" href="fb__hal_8h.html#af70a4606fe5ce0777a371e0c6c3540fb" title="Queue message for sending." alt="" coords="224,163,365,192"/><area shape="rect" id="node21" href="fb__prot_8h.html#a313ffcd6f35f6b76ed97d80765dd9faf" title="Search through group address list and return the matching position of a group address..." alt="" coords="157,109,432,139"/><area shape="rect" id="node5" href="fb__hal_8h.html#a29aed42c30189a510295e50c98f34afc" title="Hold application and set blink code to PORTB pin 0, our prog pin and LED." alt="" coords="524,5,577,35"/><area shape="rect" id="node11" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="509,149,592,179"/><area shape="rect" id="node13" href="fb__hal_8c.html#abc433410f75bf996dab8e7fa672205c0" title="Function is called from message queue system to trigger the interrupt for transmitting..." alt="" coords="508,203,593,232"/><area shape="rect" id="node15" href="fb__hal_8c.html#a8155185b5b41794d6ead2aba9870b9fa" title="Generate the telegram checksum and copy the next octet to send to fb_frame." alt="" coords="671,203,769,232"/><area shape="rect" id="node17" href="fb__hal_8c.html#a5a622f74cb37183309cbf6a3678fb129" title="Generate an EIB frame and calculate the checksum." alt="" coords="837,176,901,205"/><area shape="rect" id="node19" href="fb__hal_8c.html#aa4a5a78d404751d2731d41c606c430fc" title="Set the next state in sending mode." alt="" coords="819,229,920,259"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a990a78673785da5bb024bfaf60e0984a_icgraph.png" border="0" usemap="#fb__prot_8c_a990a78673785da5bb024bfaf60e0984a_icgraph_map" alt=""></div>
<map name="fb__prot_8c_a990a78673785da5bb024bfaf60e0984a_icgraph_map" id="fb__prot_8c_a990a78673785da5bb024bfaf60e0984a_icgraph">
<area shape="rect" id="node3" href="fb__in8__app_8c.html#a8d1473313842fe123fec771c086af269" title="Port Function: Jalousie." alt="" coords="159,5,287,35"/><area shape="rect" id="node5" href="fb__in8__app_8c.html#a3cabe34d9b90083ff13af0188e622539" title="Timer1 is used as application timer." alt="" coords="336,57,485,87"/><area shape="rect" id="node7" href="fb__in8__app_8c.html#a71a91b98ae9a796dac4ab23c7e3ff6d8" title="Port Function: switch." alt="" coords="163,109,283,139"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3b317425f1358ea37c8fca124e29c277"></a><!-- doxytag: member="fb_prot.c::T_Connect_Req" ref="a3b317425f1358ea37c8fca124e29c277" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t T_Connect_Req </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to start a connection to a physical address. </p>
<p>Only accepted if no conenction is established yet. Only acknowledge byte is returned no confirmation telegram is sent.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8c_source.html#l00083">ucd_stat::addr</a>, <a class="el" href="fb__prot_8c_source.html#l00084">ucd_stat::count</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb_8h_source.html#l00030">FB_NONE</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, <a class="el" href="fb__prot_8h_source.html#l00098">fbus_hdr::src</a>, <a class="el" href="fb__prot_8c_source.html#l00082">ucd_stat::status</a>, and <a class="el" href="fb__prot_8c_source.html#l00091">ucd</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a3b317425f1358ea37c8fca124e29c277_cgraph.png" border="0" usemap="#fb__prot_8c_a3b317425f1358ea37c8fca124e29c277_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a3b317425f1358ea37c8fca124e29c277_cgraph_map" id="fb__prot_8c_a3b317425f1358ea37c8fca124e29c277_cgraph">
<area shape="rect" id="node3" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="169,5,263,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0675ad49aa389619806157f585c466ee"></a><!-- doxytag: member="fb_prot.c::T_Disconnect_Req" ref="a0675ad49aa389619806157f585c466ee" args="(struct msg *rxmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t T_Disconnect_Req </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsg.html">msg</a> *&nbsp;</td>
          <td class="paramname"> <em>rxmsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release the transport connection. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rxmsg</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>References <a class="el" href="fb__prot_8c_source.html#l00083">ucd_stat::addr</a>, <a class="el" href="fb__prot_8c_source.html#l00084">ucd_stat::count</a>, <a class="el" href="msg__queue_8h_source.html#l00070">msg::data</a>, <a class="el" href="fb_8h_source.html#l00031">FB_ACK</a>, <a class="el" href="fb_8h_source.html#l00030">FB_NONE</a>, <a class="el" href="fb__hal_8c_source.html#l00312">fb_send_ack()</a>, <a class="el" href="fb__prot_8h_source.html#l00098">fbus_hdr::src</a>, <a class="el" href="fb__prot_8c_source.html#l00082">ucd_stat::status</a>, and <a class="el" href="fb__prot_8c_source.html#l00091">ucd</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="fb__prot_8c_a0675ad49aa389619806157f585c466ee_cgraph.png" border="0" usemap="#fb__prot_8c_a0675ad49aa389619806157f585c466ee_cgraph_map" alt=""></div>
<map name="fb__prot_8c_a0675ad49aa389619806157f585c466ee_cgraph_map" id="fb__prot_8c_a0675ad49aa389619806157f585c466ee_cgraph">
<area shape="rect" id="node3" href="fb__hal_8h.html#a3e4f31f4b97d833e7ef5fb9615def386" title="Function to set the ack value for the response to a telegram which must be send in..." alt="" coords="185,5,279,35"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aae3c982e005b9e0659d533393720a7f8"></a><!-- doxytag: member="fb_prot.c::grp_addr" ref="aae3c982e005b9e0659d533393720a7f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgrp__addr__s.html">grp_addr_s</a> <a class="el" href="fb__prot_8c.html#aae3c982e005b9e0659d533393720a7f8">grp_addr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List of saved group addresses for this controller, see struct <a class="el" href="structgrp__addr__s.html" title="Structure for the group addresses.">grp_addr_s</a> for more information. </p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00786">check_addr()</a>, <a class="el" href="fb__prot_8c_source.html#l00287">read_grp_addr()</a>, <a class="el" href="fb__2-dimmer__app_8c_source.html#l00261">readApplication()</a>, <a class="el" href="fb__2-dimmer__app_8c_source.html#l00340">runApplication()</a>, <a class="el" href="fb__prot_8c_source.html#l00163">sendExtTelegram()</a>, and <a class="el" href="fb__prot_8c_source.html#l00210">sendTelegram()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1cd66b780fee6c2be823928c720a129"></a><!-- doxytag: member="fb_prot.c::PROGMEM" ref="ab1cd66b780fee6c2be823928c720a129" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfb__cmd.html">fb_cmd</a> bus_cmds [] <a class="el" href="lib_2uart_8c.html#a0e2fa7eab54405a676752c417d75eec0">PROGMEM</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {



    {              <a class="code" href="fb__prot_8c.html#ab3b0799fb79aec4bb06d92b4770139f9" title="Group adress.">MSG_GRP</a> , 0x0080, 0x03C0, 0x00, 0x0E, <a class="code" href="fb__prot_8c.html#abb5d4fc672e3e3e123f5f3e6e9f901e3" title="Is called if a broadcast is received with a matching group address (eg.">A_GroupValue_Write</a> },
    {              <a class="code" href="fb__prot_8c.html#ab3b0799fb79aec4bb06d92b4770139f9" title="Group adress.">MSG_GRP</a> , 0x0000, 0x03FF, 0x00, 0x10, <a class="code" href="fb__prot_8c.html#ae56aada1e48493023c8f3ecf7a1e71a7" title="A read request to the application.">A_GroupValue_Read</a> },


    {              <a class="code" href="fb__prot_8c.html#a253031b1534db6709a48eb59e440b801" title="connect request">MSG_CON</a> , 0x0000, 0x0000, 0x01, 0x01, <a class="code" href="fb__prot_8c.html#a3b317425f1358ea37c8fca124e29c277" title="Called to start a connection to a physical address.">T_Connect_Req</a> },
    {              <a class="code" href="fb__prot_8c.html#ac7d0d9a9ace91de05ac02191bd7a1aa8" title="disconnect request">MSG_DIS</a> , 0x0000, 0x0000, 0x01, 0x01, <a class="code" href="fb__prot_8c.html#a0675ad49aa389619806157f585c466ee" title="Release the transport connection.">T_Disconnect_Req</a> },
    {              <a class="code" href="fb__prot_8c.html#af4b7d60452ebd8d0355291bd3b720e39" title="Direct adressing, one-to-one.">MSG_DAF</a> , 0xC200, 0xC300, 0x01, 0x01, <a class="code" href="fb__prot_8c.html#a5928e9483083ad86d6c82f0b0ca533af" title="Send aknowledge to certain message.">Ignore</a>},


    {    <a class="code" href="fb__prot_8c.html#a13b38c2f32cb6fdf9e18f62e5dce75c6" title="Broadcast adress, one-to-all conenction-less.">MSG_BRC</a> | <a class="code" href="fb__prot_8c.html#af4b7d60452ebd8d0355291bd3b720e39" title="Direct adressing, one-to-one.">MSG_DAF</a> , 0x00C0, 0x03FF, 0x04, 0x04, <a class="code" href="fb__prot_8c.html#ac3b30c7591e51974ab895440929395c6" title="Set the received address as our new device address.">A_PhysicalAddress_Write</a> },      
    {    <a class="code" href="fb__prot_8c.html#a13b38c2f32cb6fdf9e18f62e5dce75c6" title="Broadcast adress, one-to-all conenction-less.">MSG_BRC</a> | <a class="code" href="fb__prot_8c.html#af4b7d60452ebd8d0355291bd3b720e39" title="Direct adressing, one-to-one.">MSG_DAF</a> , 0x0100, 0x03FF, 0x02, 0x02, <a class="code" href="fb__prot_8c.html#ae42ed05d4ccf0a841bdaa32fe7af4478" title="Returns the address of the device.">A_PhysicalAddress_Read</a> },






    {              <a class="code" href="fb__prot_8c.html#af4b7d60452ebd8d0355291bd3b720e39" title="Direct adressing, one-to-one.">MSG_DAF</a> , 0x0180, 0x03C0, 0x03, 0x03, <a class="code" href="fb__prot_8c.html#a4a0be801ed4f2d9b2cbce548adf56a76" title="Read the values from the ADC converter.">A_ADC_Read</a> },
    {              <a class="code" href="fb__prot_8c.html#af4b7d60452ebd8d0355291bd3b720e39" title="Direct adressing, one-to-one.">MSG_DAF</a> , 0x4200, 0xC3C0, 0x04, 0x04, <a class="code" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c" title="Read data from eeprom and return send it as telegram back to the requester.">A_Memory_Read</a> },
    {              <a class="code" href="fb__prot_8c.html#af4b7d60452ebd8d0355291bd3b720e39" title="Direct adressing, one-to-one.">MSG_DAF</a> , 0x4280, 0xC3C0, 0x01, 0x10, <a class="code" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf" title="Write recieved data to the eeprom.">A_Memory_Write</a> },

    {              <a class="code" href="fb__prot_8c.html#af4b7d60452ebd8d0355291bd3b720e39" title="Direct adressing, one-to-one.">MSG_DAF</a> , 0x4300, 0xFFFF, 0x02, 0x02, <a class="code" href="fb__prot_8c.html#a37d55968595e78e21dc1dba21418acf4" title="Is called if information for the BCU type is requested.">A_DeviceDescriptor_Read</a> },
    {              <a class="code" href="fb__prot_8c.html#af4b7d60452ebd8d0355291bd3b720e39" title="Direct adressing, one-to-one.">MSG_DAF</a> , 0x0380, 0x03FF, 0x02, 0x02, <a class="code" href="fb__prot_8c.html#a088341f3603f5de9eb4817a8199391c6" title="Restart the program on the microcontroller.">A_Restart</a>},
}
</pre></div>
<p>Store mapping of function with parameters called by bus memebers. </p>

</div>
</div>
<a class="anchor" id="a5299818938807c9ebc199b66cbc01958"></a><!-- doxytag: member="fb_prot.c::ucd" ref="a5299818938807c9ebc199b66cbc01958" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structucd__stat.html">ucd_stat</a> <a class="el" href="fb__prot_8c.html#a5299818938807c9ebc199b66cbc01958">ucd</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Used to track transport connections, for this source address, status and counter is saved. </p>

<p>Referenced by <a class="el" href="fb__prot_8c_source.html#l00622">A_ADC_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00542">A_Memory_Read()</a>, <a class="el" href="fb__prot_8c_source.html#l00435">T_Connect_Req()</a>, and <a class="el" href="fb__prot_8c_source.html#l00459">T_Disconnect_Req()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
