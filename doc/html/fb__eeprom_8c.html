<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FreeBusAVR: lib/fb_eeprom.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>lib/fb_eeprom.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>The memory is divided into two parts. The complete size of the memory is tbd.<br/>
 0x00CE-0x00DF: User memory (0x00CE-0x00DF), 18 Byte<br/>
 0x0100-0x01FF: EEprom Handles communication from and to eeprom.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="fb_8h_source.html">fb.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fb__hardware_8h_source.html">fb_hardware.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="msg__queue_8h_source.html">msg_queue.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fb__hal_8h_source.html">fb_hal.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="freebus-debug_8h_source.html">freebus-debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fb__eeprom_8h_source.html">fb_eeprom.h</a>&quot;</code><br/>
<code>#include &quot;rf22.h&quot;</code><br/>
<!-- startSectionHeader --><div class="dynheader">
Include dependency graph for fb_eeprom.c:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c__incl.png" border="0" usemap="#lib_2fb__eeprom_8c" alt=""/></div>
<map name="lib_2fb__eeprom_8c" id="lib_2fb__eeprom_8c">
<area shape="rect" id="node3" href="fb_8h.html" title="Define general values used in bus communication." alt="" coords="5,237,51,267"/><area shape="rect" id="node5" href="fb__hardware_8h.html" title="Hardware specific options which includes the platforms (like ATmega8, ATmega168...)" alt="" coords="75,237,187,267"/><area shape="rect" id="node7" href="msg__queue_8h.html" title="Definitions for the message queue system used for telegrams and communucation like debugging (also rs..." alt="" coords="155,160,264,189"/><area shape="rect" id="node15" href="fb__hal_8h.html" title="Definitions on Hardware Abstration Layer." alt="" coords="292,83,364,112"/><area shape="rect" id="node22" href="freebus-debug_8h.html" title="Header file to map debugging between several output devices. Possible outputs are lcd..." alt="" coords="388,83,513,112"/><area shape="rect" id="node30" href="fb__eeprom_8h.html" title="Handling the access and mapping to the eeprom." alt="" coords="537,83,639,112"/><area shape="rect" id="node32" href="rf_2rf22-controller_2rf22_8h_source.html" title="rf22.h" alt="" coords="663,83,721,112"/><area shape="rect" id="node26" href="lcd-lib_8h.html" title="lcd&#45;lib.h" alt="" coords="517,160,587,189"/><area shape="rect" id="node28" href="delay_8h.html" title="Functions to delay the execution." alt="" coords="519,237,585,267"/></map>
<!-- endSectionContent --></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeeprom__cmds.html">eeprom_cmds</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Data will be written to the eeprom byte by byte that structure save data and variables needed to write data to the eeprom.  <a href="structeeprom__cmds.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structeeprom__cmds.html">eeprom_cmds</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#a03567569fc0750c83035037ece6c0157">EEPROM_CMDS</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Data will be written to the eeprom byte by byte that structure save data and variables needed to write data to the eeprom.  <a href="#a03567569fc0750c83035037ece6c0157"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#a6ab1e3cc3c300d12592e39648da8c022">prog_ee</a> (uint16_t addr, uint8_t dat)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Store on byte on eeprom.  <a href="#a6ab1e3cc3c300d12592e39648da8c022"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#ac92e88b86efd0e0e32beaee667bfc226">trigger_eeprom</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start to write the first byte to eeprom.  <a href="#ac92e88b86efd0e0e32beaee667bfc226"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#a1830429d15e4ec8062725ab771275327">ISR</a> (EE_READY_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt handler to write queued eeprom data byte for byte to eeprom without blocking the controller.  <a href="#a1830429d15e4ec8062725ab771275327"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#a55d6c1613e8277e1d8d3d9187b773c3a">mem_ReadByte</a> (uint16_t addr)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the eeprom cache and return it.  <a href="#a55d6c1613e8277e1d8d3d9187b773c3a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#a53d6293cbd69348099446f41c12943a3">mem_WriteBlock</a> (uint16_t addr, uint8_t len, uint8_t *dat)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to the eeprom cache and trigger background process to write eeprom cache to real eeprom.  <a href="#a53d6293cbd69348099446f41c12943a3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#aa4b1f50ccff861cd630909a662b29b0d">eeprom_busy</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if eeprom cache was written completely to eeprom.  <a href="#aa4b1f50ccff861cd630909a662b29b0d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#a96f365c9a61f6dd9b856c7da3d6fefde">eeprom_ParamSetDefault</a> (const <a class="el" href="structSTRUCT__DEFPARAM.html">STRUCT_DEFPARAM</a> *pParam)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">store the default parameter directly to the eeprom  <a href="#a96f365c9a61f6dd9b856c7da3d6fefde"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#a9ff2e645d89f0b31c6497311754a69be">eeprom_GetBase</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pointer to the eeprom cache.  <a href="#a9ff2e645d89f0b31c6497311754a69be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#aef320e016dbb25dac76482345f2ce495">eeprom_Init</a> (uint8_t *<a class="el" href="fb__prot_8c.html#a8eddb2a4af440b7e0c13055d3ad4bc7d">nodeParam</a>, uint16_t paramlen)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the eeprom to the eeprom cache.  <a href="#aef320e016dbb25dac76482345f2ce495"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#a4106e144334e369c48eed9dfe23e593c">eeprom_print</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the complete eeprom to DEBUG defined.  <a href="#a4106e144334e369c48eed9dfe23e593c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#a8b54a9207abfa04fdd10537033a94a37">eeprom_NodeParam</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">parameter structure (pointer)  <a href="#a8b54a9207abfa04fdd10537033a94a37"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#ac361d05f7daac2a71b7f7d881c5e1663">eeprom_NodeParamLen</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">length of the paramater structure  <a href="#ac361d05f7daac2a71b7f7d881c5e1663"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmsg.html">msg</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fb__eeprom_8c.html#ab39ebd5d0ee54f5e9d3a406a52e6f1df">eeprom_msg</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">EEprom msg queue.  <a href="#ab39ebd5d0ee54f5e9d3a406a52e6f1df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa71bb4c495513328fbe02195c80872cd"></a><!-- doxytag: member="fb_eeprom.c::userram" ref="aa71bb4c495513328fbe02195c80872cd" args="[USERRAM_SIZE]" -->
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>userram</b> [USERRAM_SIZE]</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The memory is divided into two parts. The complete size of the memory is tbd.<br/>
 0x00CE-0x00DF: User memory (0x00CE-0x00DF), 18 Byte<br/>
 0x0100-0x01FF: EEprom Handles communication from and to eeprom. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Dirk Opfer, Matthias Fechner, Christian Bode, Dirk Armbrust </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Fri Oct 26 17:18:15 2007</dd></dl>
<p>attention: don't use <a class="el" href="fb__eeprom_8c.html#a6ab1e3cc3c300d12592e39648da8c022" title="Store on byte on eeprom.">prog_ee()</a> with opt-level 0 </p>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a03567569fc0750c83035037ece6c0157"></a><!-- doxytag: member="fb_eeprom.c::EEPROM_CMDS" ref="a03567569fc0750c83035037ece6c0157" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structeeprom__cmds.html">eeprom_cmds</a>  <a class="el" href="structeeprom__cmds.html">EEPROM_CMDS</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Data will be written to the eeprom byte by byte that structure save data and variables needed to write data to the eeprom. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aa4b1f50ccff861cd630909a662b29b0d"></a><!-- doxytag: member="fb_eeprom.c::eeprom_busy" ref="aa4b1f50ccff861cd630909a662b29b0d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t eeprom_busy </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if eeprom cache was written completely to eeprom. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if eeprom cache is not written completely to eeprom </dd></dl>

<p>References <a class="el" href="freebus-debug_8h.html#a992e66debf91a3c70533bbae6b5a046a">DEBUG_NEWLINE</a>, <a class="el" href="freebus-debug_8h.html#ad8d82a47e19a599b0cca4140ed6b7c86">DEBUG_PUTC</a>, <a class="el" href="fb_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, and <a class="el" href="fb_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c.html#a088341f3603f5de9eb4817a8199391c6">A_Restart()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_aa4b1f50ccff861cd630909a662b29b0d_icgraph.png" border="0" usemap="#fb__eeprom_8c_aa4b1f50ccff861cd630909a662b29b0d_icgraph" alt=""/></div>
<map name="fb__eeprom_8c_aa4b1f50ccff861cd630909a662b29b0d_icgraph" id="fb__eeprom_8c_aa4b1f50ccff861cd630909a662b29b0d_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a088341f3603f5de9eb4817a8199391c6" title="Restart the program on the microcontroller." alt="" coords="155,5,235,35"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a9ff2e645d89f0b31c6497311754a69be"></a><!-- doxytag: member="fb_eeprom.c::eeprom_GetBase" ref="a9ff2e645d89f0b31c6497311754a69be" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* eeprom_GetBase </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the pointer to the eeprom cache. </p>
<p>This can be used for an optimized read access. </p>

<p>References <a class="el" href="fb__eeprom_8c.html#a8b54a9207abfa04fdd10537033a94a37">eeprom_NodeParam</a>.</p>

</div>
</div>
<a class="anchor" id="aef320e016dbb25dac76482345f2ce495"></a><!-- doxytag: member="fb_eeprom.c::eeprom_Init" ref="aef320e016dbb25dac76482345f2ce495" args="(uint8_t *nodeParam, uint16_t paramlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_Init </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"> <em>nodeParam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"> <em>paramlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the eeprom to the eeprom cache. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">nodeParam</td><td></td></tr>
    <tr><td class="paramname">paramlen</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="freebus-atmega168_8h.html#ac140abd1f471e713e94eb1959a316694">CONFIG_EEPROM</a>, <a class="el" href="fb__eeprom_8c.html#a8b54a9207abfa04fdd10537033a94a37">eeprom_NodeParam</a>, <a class="el" href="fb__eeprom_8c.html#ac361d05f7daac2a71b7f7d881c5e1663">eeprom_NodeParamLen</a>, and <a class="el" href="fb__adc_8c.html#a0e697e56b88a7c0fb3b3a3c1e7cd2682">nodeParam</a>.</p>

<p>Referenced by <a class="el" href="fb__adc_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_aef320e016dbb25dac76482345f2ce495_icgraph.png" border="0" usemap="#fb__eeprom_8c_aef320e016dbb25dac76482345f2ce495_icgraph" alt=""/></div>
<map name="fb__eeprom_8c_aef320e016dbb25dac76482345f2ce495_icgraph" id="fb__eeprom_8c_aef320e016dbb25dac76482345f2ce495_icgraph">
<area shape="rect" id="node3" href="fb__adc_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the application and chec..." alt="" coords="153,5,207,35"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a96f365c9a61f6dd9b856c7da3d6fefde"></a><!-- doxytag: member="fb_eeprom.c::eeprom_ParamSetDefault" ref="a96f365c9a61f6dd9b856c7da3d6fefde" args="(const STRUCT_DEFPARAM *pParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_ParamSetDefault </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structSTRUCT__DEFPARAM.html">STRUCT_DEFPARAM</a> *&#160;</td>
          <td class="paramname"> <em>pParam</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>store the default parameter directly to the eeprom </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pParam</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="structeeprom__cmds.html#adb77e1db3eb6f533394c629782e42bf9">eeprom_cmds::addr</a>, <a class="el" href="fb__eeprom_8h.html#a27e2dbb193fe9e6cfbf74e9103117fcf">BASE_ADDRESS_OFFSET</a>, <a class="el" href="fb__eeprom_8c.html#a8b54a9207abfa04fdd10537033a94a37">eeprom_NodeParam</a>, <a class="el" href="fb__eeprom_8c.html#ac361d05f7daac2a71b7f7d881c5e1663">eeprom_NodeParamLen</a>, <a class="el" href="fb__eeprom_8h.html#a4ea9ff8ea5eb2ec0e0e150d54a0bc0ee">MAX_EEPROM_SIZE</a>, and <a class="el" href="fb__eeprom_8h.html#adfc8790bc691a72a03b40b7641801fb6">NODEPARAM_SIZE</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b">fbprot_Init()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_a96f365c9a61f6dd9b856c7da3d6fefde_icgraph.png" border="0" usemap="#fb__eeprom_8c_a96f365c9a61f6dd9b856c7da3d6fefde_icgraph" alt=""/></div>
<map name="fb__eeprom_8c_a96f365c9a61f6dd9b856c7da3d6fefde_icgraph" id="fb__eeprom_8c_a96f365c9a61f6dd9b856c7da3d6fefde_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b" title="Read configuration from eeprom is existant or set default values and write them to the eeprom..." alt="" coords="244,5,329,35"/><area shape="rect" id="node5" href="fb__adc_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the application and chec..." alt="" coords="380,5,433,35"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a4106e144334e369c48eed9dfe23e593c"></a><!-- doxytag: member="fb_eeprom.c::eeprom_print" ref="a4106e144334e369c48eed9dfe23e593c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_print </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print the complete eeprom to DEBUG defined. </p>

<p>References <a class="el" href="structeeprom__cmds.html#adb77e1db3eb6f533394c629782e42bf9">eeprom_cmds::addr</a>, <a class="el" href="freebus-debug_8h.html#a03ae420828c2fb5e870f8807b4620863">DEBUG_NEWLINE_BLOCKING</a>, <a class="el" href="freebus-debug_8h.html#a03722a597fdc8617772c450b9364faca">DEBUG_PUTC_BLOCKING</a>, <a class="el" href="freebus-debug_8h.html#af9a08bd01fa3ba78fdb40bad52cc82c4">DEBUG_PUTHEX_BLOCKING</a>, and <a class="el" href="fb__eeprom_8h.html#a9eb1d517bad2009ea1fcaa3dfb8d87f2">mem_ReadByte()</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b">fbprot_Init()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the call graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_a4106e144334e369c48eed9dfe23e593c_cgraph.png" border="0" usemap="#fb__eeprom_8c_a4106e144334e369c48eed9dfe23e593c_cgraph" alt=""/></div>
<map name="fb__eeprom_8c_a4106e144334e369c48eed9dfe23e593c_cgraph" id="fb__eeprom_8c_a4106e144334e369c48eed9dfe23e593c_cgraph">
<area shape="rect" id="node3" href="fb__eeprom_8h.html#a9eb1d517bad2009ea1fcaa3dfb8d87f2" title="Read data from the eeprom cache and return it." alt="" coords="164,5,287,35"/></map>
<!-- endSectionContent --></div>
</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_a4106e144334e369c48eed9dfe23e593c_icgraph.png" border="0" usemap="#fb__eeprom_8c_a4106e144334e369c48eed9dfe23e593c_icgraph" alt=""/></div>
<map name="fb__eeprom_8c_a4106e144334e369c48eed9dfe23e593c_icgraph" id="fb__eeprom_8c_a4106e144334e369c48eed9dfe23e593c_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b" title="Read configuration from eeprom is existant or set default values and write them to the eeprom..." alt="" coords="164,5,249,35"/><area shape="rect" id="node5" href="fb__adc_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the application and chec..." alt="" coords="300,5,353,35"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a1830429d15e4ec8062725ab771275327"></a><!-- doxytag: member="fb_eeprom.c::ISR" ref="a1830429d15e4ec8062725ab771275327" args="(EE_READY_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">EE_READY_vect&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Interrupt handler to write queued eeprom data byte for byte to eeprom without blocking the controller. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000084">Todo:</a></b></dt><dd>ist noch unsauber </dd></dl>
</p>

<p>References <a class="el" href="structeeprom__cmds.html#adb77e1db3eb6f533394c629782e42bf9">eeprom_cmds::addr</a>, <a class="el" href="structeeprom__cmds.html#a44d518dfa8acdbf5ef273d0f252a446d">eeprom_cmds::count</a>, <a class="el" href="structeeprom__cmds.html#a3cc13b5e43a08b530caca0852f27627f">eeprom_cmds::data</a>, <a class="el" href="structmsg.html#a4d5d84257dfd217679a22a7d2ff9dd6f">msg::data</a>, <a class="el" href="msg__queue_8h.html#a76c904b1fd4cb70e06c96422f8a58e43">dequeuemsg()</a>, <a class="el" href="freebus-atmega168_8h.html#a1c46c52afd69da2112aaab1269282ef1">DISABLE_EEPROM_READY_INT</a>, <a class="el" href="freebus-atmega168_8h.html#ae66cebcc81aa5562902071493085f86b">ENABLE_EEPROM_READY_INT</a>, and <a class="el" href="structeeprom__cmds.html#aa19fca354e30ba3a8a2f0193b69f6874">eeprom_cmds::offset</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the call graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_a1830429d15e4ec8062725ab771275327_cgraph.png" border="0" usemap="#fb__eeprom_8c_a1830429d15e4ec8062725ab771275327_cgraph" alt=""/></div>
<map name="fb__eeprom_8c_a1830429d15e4ec8062725ab771275327_cgraph" id="fb__eeprom_8c_a1830429d15e4ec8062725ab771275327_cgraph">
<area shape="rect" id="node3" href="msg__queue_8h.html#a76c904b1fd4cb70e06c96422f8a58e43" title="Remove a message from the queue." alt="" coords="96,5,203,35"/><area shape="rect" id="node5" href="msg__queue_8h.html#afec1149f3bb049af42978cf90c775ca6" title="Free the message and mark it as MSG_FREE." alt="" coords="252,5,327,35"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a55d6c1613e8277e1d8d3d9187b773c3a"></a><!-- doxytag: member="fb_eeprom.c::mem_ReadByte" ref="a55d6c1613e8277e1d8d3d9187b773c3a" args="(uint16_t addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mem_ReadByte </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"> <em>addr</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read data from the eeprom cache and return it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>The address from the eeprom to read the data</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Value in eeprom on addr </dd></dl>

<p>References <a class="el" href="structeeprom__cmds.html#adb77e1db3eb6f533394c629782e42bf9">eeprom_cmds::addr</a>, <a class="el" href="fb__eeprom_8h.html#a27e2dbb193fe9e6cfbf74e9103117fcf">BASE_ADDRESS_OFFSET</a>, <a class="el" href="fb__eeprom_8c.html#a8b54a9207abfa04fdd10537033a94a37">eeprom_NodeParam</a>, <a class="el" href="fb__eeprom_8h.html#adfc8790bc691a72a03b40b7641801fb6">NODEPARAM_SIZE</a>, <a class="el" href="fb__hal_8h.html#a53ac9c8b9cfb94746b9f5b39bf152620">systemState</a>, <a class="el" href="fb__eeprom_8h.html#aeac389a0f36adb86fc05441813ef6a8f">SYSTEMSTATE</a>, <a class="el" href="fb__eeprom_8h.html#a961cdab61aff93bd075220ecac3942b3">USERRAM_BASE_ADR</a>, and <a class="el" href="fb__eeprom_8h.html#af71e2dd6203c29e2508fd31affe62459">USERRAM_SIZE</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c.html#ae56aada1e48493023c8f3ecf7a1e71a7">A_GroupValue_Read()</a>, <a class="el" href="fb__prot_8c.html#abb5d4fc672e3e3e123f5f3e6e9f901e3">A_GroupValue_Write()</a>, <a class="el" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c">A_Memory_Read()</a>, <a class="el" href="fb__eeprom_8c.html#a4106e144334e369c48eed9dfe23e593c">eeprom_print()</a>, <a class="el" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b">fbprot_Init()</a>, <a class="el" href="fb__ain10v_8c.html#a4adf2da9160be7c9f461cafa1028ab0d">find_ga()</a>, <a class="el" href="fb__prot_8c.html#ac5c589c547e7f53fb4b2c9bbbbe8797a">findRespondGroupAddressByObjectNumber()</a>, <a class="el" href="fb__in8__app_8c.html#ac5f68c3b0256b1990defd5eb2f2f1967">getPortFunction()</a>, <a class="el" href="fb__ain10v_8c.html#a1d762fe1f1ce62bd56884403b182a825">grenzwert()</a>, <a class="el" href="fb__ain10v_8c.html#a2c388ff8187bf7414e1d84b7b40cd29a">messwert()</a>, <a class="el" href="fb__in8__app_8c.html#a8d1473313842fe123fec771c086af269">PortFunc_Jalousie()</a>, <a class="el" href="fb__in8__app_8c.html#a71a91b98ae9a796dac4ab23c7e3ff6d8">PortFunc_Switch()</a>, <a class="el" href="fb__relais__app_8c.html#a1f6d9eb16dbc08dfcfac5f8ceb8d7f40">processOutputs()</a>, <a class="el" href="fb__prot_8c.html#aaec72f885e36952a75395779cf20d684">read_grp_addr()</a>, <a class="el" href="fb__ain10v_8c.html#a1e40bd2b97ada2ca31c9dad1fdabe923">read_obj_type()</a>, <a class="el" href="fb__ain10v_8c.html#acdb92216340d9fc010cc12bbb44bbfb2">readApplication()</a>, <a class="el" href="fb__ain10v_8c.html#aabc97de0ba2150af0af7d2ddb8293824">restartApplication()</a>, <a class="el" href="fb__relais__app_8c.html#a30773cfc4105728c9628fca36c8c7c20">runApplication()</a>, <a class="el" href="fb__ain10v_8c.html#afce7816ae10dafa4d8a1b63a03594085">send_value()</a>, <a class="el" href="fb__ain10v_8c.html#af335f935e90e2e0311db66d066cde8c3">sendewert()</a>, <a class="el" href="fb__prot_8c.html#ade80ef84f4f14d25a2283b43d9c1a54f">sendExtTelegram()</a>, <a class="el" href="fb__prot_8c.html#a990a78673785da5bb024bfaf60e0984a">sendTelegram()</a>, <a class="el" href="fb__relais__app_8c.html#aac9e4f65925a5a959cb5df9ed091b3b7">switchObjects()</a>, and <a class="el" href="fb__ain10v_8c.html#a3cabe34d9b90083ff13af0188e622539">timerOverflowFunction()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_a55d6c1613e8277e1d8d3d9187b773c3a_icgraph.png" border="0" usemap="#fb__eeprom_8c_a55d6c1613e8277e1d8d3d9187b773c3a_icgraph" alt=""/></div>
<map name="fb__eeprom_8c_a55d6c1613e8277e1d8d3d9187b773c3a_icgraph" id="fb__eeprom_8c_a55d6c1613e8277e1d8d3d9187b773c3a_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#ae56aada1e48493023c8f3ecf7a1e71a7" title="A read request to the application." alt="" coords="255,5,404,35"/><area shape="rect" id="node5" href="fb__prot_8c.html#abb5d4fc672e3e3e123f5f3e6e9f901e3" title="Is called if a broadcast is received with a matching group address (eg." alt="" coords="255,59,404,88"/><area shape="rect" id="node7" href="fb__prot_8c.html#af2931210aae10a2c39698d2f1fb3c98c" title="Read data from eeprom and return send it as telegram back to the requester." alt="" coords="265,112,393,141"/><area shape="rect" id="node9" href="fb__eeprom_8c.html#a4106e144334e369c48eed9dfe23e593c" title="Print the complete eeprom to DEBUG defined." alt="" coords="276,216,383,245"/><area shape="rect" id="node11" href="fb__prot_8c.html#a3e2ec796b82409111b3a88a764b17e4b" title="Read configuration from eeprom is existant or set default values and write them to the eeprom..." alt="" coords="553,216,639,245"/><area shape="rect" id="node16" href="fb__ain10v_8c.html#a4adf2da9160be7c9f461cafa1028ab0d" title="Gruppenadresse ueber Assoziationstabelle finden." alt="" coords="296,475,363,504"/><area shape="rect" id="node18" href="fb__ain10v_8c.html#afce7816ae10dafa4d8a1b63a03594085" title="sucht Gruppenadresse für das Objekt objno uns sendet ein EIS Telegramm" alt="" coords="549,475,643,504"/><area shape="rect" id="node24" href="fb__ain10v_8c.html#a1d762fe1f1ce62bd56884403b182a825" title="Senden bei Grenzwertüber&#45; bzw." alt="" coords="752,449,837,479"/><area shape="rect" id="node27" href="fb__ain10v_8c.html#a3cabe34d9b90083ff13af0188e622539" title="Timer1 is used as application timer." alt="" coords="713,581,876,611"/><area shape="rect" id="node30" href="fb__prot_8c.html#ac5c589c547e7f53fb4b2c9bbbbe8797a" title="Search through group address list and return the matching position of a group address which is an res..." alt="" coords="180,837,479,867"/><area shape="rect" id="node32" href="fb__prot_8c.html#ade80ef84f4f14d25a2283b43d9c1a54f" title="Send telegram as response to signal current state of the port to other devices." alt="" coords="531,811,661,840"/><area shape="rect" id="node34" href="fb__prot_8c.html#a990a78673785da5bb024bfaf60e0984a" title="Send telegram as response to signal current state of the port to other devices." alt="" coords="540,888,652,917"/><area shape="rect" id="node36" href="fb__in8__app_8c.html#a8d1473313842fe123fec771c086af269" title="Port Function: Jalousie." alt="" coords="728,796,861,825"/><area shape="rect" id="node38" href="fb__in8__app_8c.html#a71a91b98ae9a796dac4ab23c7e3ff6d8" title="Port Function: switch." alt="" coords="732,912,857,941"/><area shape="rect" id="node40" href="fb__relais__app_8c.html#a1f6d9eb16dbc08dfcfac5f8ceb8d7f40" title="processOutputs" alt="" coords="733,1016,856,1045"/><area shape="rect" id="node42" href="fb__relais__app_8c.html#a30773cfc4105728c9628fca36c8c7c20" title="Function is called if A_GroupValue_Write is received." alt="" coords="927,1080,1039,1109"/><area shape="rect" id="node44" href="fb__in8__app_8c.html#ac5f68c3b0256b1990defd5eb2f2f1967" title="Get the function code for the select port." alt="" coords="268,1197,391,1227"/><area shape="rect" id="node47" href="fb__ain10v_8c.html#a2c388ff8187bf7414e1d84b7b40cd29a" title="Senden bei Messwertdifferenz überprüft die Messwertdifferenz schreibt die Verzögerungszeit ins delrec..." alt="" coords="555,320,637,349"/><area shape="rect" id="node53" href="fb__prot_8c.html#aaec72f885e36952a75395779cf20d684" title="Read the group addresses from the eeprom and save them in the struct grp_addr." alt="" coords="272,269,387,299"/><area shape="rect" id="node56" href="fb__ain10v_8c.html#a1e40bd2b97ada2ca31c9dad1fdabe923" title="read_obj_type" alt="" coords="273,528,385,557"/><area shape="rect" id="node58" href="fb__ain10v_8c.html#acdb92216340d9fc010cc12bbb44bbfb2" title="Read status from port and return it." alt="" coords="536,529,656,559"/><area shape="rect" id="node62" href="fb__ain10v_8c.html#aabc97de0ba2150af0af7d2ddb8293824" title="Function is called when microcontroller gets power or if the application must be restarted." alt="" coords="263,1251,396,1280"/><area shape="rect" id="node66" href="fb__ain10v_8c.html#af335f935e90e2e0311db66d066cde8c3" title="bringt den Messwert ins Sendeformat 8 Bit oder 16 Bit" alt="" coords="285,632,373,661"/><area shape="rect" id="node73" href="fb__relais__app_8c.html#aac9e4f65925a5a959cb5df9ed091b3b7" title="Switch the objects to state in portValue and save value to eeprom if necessary." alt="" coords="275,1043,384,1072"/><area shape="rect" id="node13" href="fb__adc_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the application and chec..." alt="" coords="768,216,821,245"/><area shape="rect" id="node20" href="fb__ain10v_8c.html#a89d45c9804fe8784db05dddf84028e3f" title="Verhalten bei Busspannungswiederkehr sofortiges Senden der Messwerte und Grenzwerte bei Busspannungsw..." alt="" coords="749,503,840,532"/><area shape="rect" id="node22" href="fb__ain10v_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The start point of the program, init all libraries, start the bus interface, the application and chec..." alt="" coords="956,476,1009,505"/><area shape="rect" id="node76" href="fb__relais__app_8c.html#aabc97de0ba2150af0af7d2ddb8293824" title="Function is called when microcontroller gets power or if the application must be restarted." alt="" coords="529,1093,663,1123"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a53d6293cbd69348099446f41c12943a3"></a><!-- doxytag: member="fb_eeprom.c::mem_WriteBlock" ref="a53d6293cbd69348099446f41c12943a3" args="(uint16_t addr, uint8_t len, uint8_t *dat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mem_WriteBlock </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"> <em>dat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write data to the eeprom cache and trigger background process to write eeprom cache to real eeprom. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>start address of the data in the eeprom </td></tr>
    <tr><td class="paramname">len</td><td>length of data </td></tr>
    <tr><td class="paramname">dat</td><td>data to write in the eeprom </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="structeeprom__cmds.html#adb77e1db3eb6f533394c629782e42bf9">eeprom_cmds::addr</a>, <a class="el" href="msg__queue_8h.html#aadc5609c7a2263c8cae4ab0d8eae7c4d">AllocMsg()</a>, <a class="el" href="fb__eeprom_8h.html#a27e2dbb193fe9e6cfbf74e9103117fcf">BASE_ADDRESS_OFFSET</a>, <a class="el" href="structeeprom__cmds.html#a44d518dfa8acdbf5ef273d0f252a446d">eeprom_cmds::count</a>, <a class="el" href="structeeprom__cmds.html#a3cc13b5e43a08b530caca0852f27627f">eeprom_cmds::data</a>, <a class="el" href="structmsg.html#a4d5d84257dfd217679a22a7d2ff9dd6f">msg::data</a>, <a class="el" href="fb__eeprom_8c.html#a8b54a9207abfa04fdd10537033a94a37">eeprom_NodeParam</a>, <a class="el" href="fb__eeprom_8h.html#adfc8790bc691a72a03b40b7641801fb6">NODEPARAM_SIZE</a>, <a class="el" href="structeeprom__cmds.html#aa19fca354e30ba3a8a2f0193b69f6874">eeprom_cmds::offset</a>, <a class="el" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e">queuemsg()</a>, <a class="el" href="fb__hal_8h.html#a53ac9c8b9cfb94746b9f5b39bf152620">systemState</a>, <a class="el" href="fb__eeprom_8h.html#aeac389a0f36adb86fc05441813ef6a8f">SYSTEMSTATE</a>, <a class="el" href="fb__eeprom_8c.html#ac92e88b86efd0e0e32beaee667bfc226">trigger_eeprom()</a>, <a class="el" href="fb__eeprom_8h.html#a961cdab61aff93bd075220ecac3942b3">USERRAM_BASE_ADR</a>, and <a class="el" href="fb__eeprom_8h.html#af71e2dd6203c29e2508fd31affe62459">USERRAM_SIZE</a>.</p>

<p>Referenced by <a class="el" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf">A_Memory_Write()</a>, <a class="el" href="fb__prot_8c.html#ac3b30c7591e51974ab895440929395c6">A_PhysicalAddress_Write()</a>, and <a class="el" href="fb__relais__app_8c.html#aac9e4f65925a5a959cb5df9ed091b3b7">switchObjects()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the call graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_a53d6293cbd69348099446f41c12943a3_cgraph.png" border="0" usemap="#fb__eeprom_8c_a53d6293cbd69348099446f41c12943a3_cgraph" alt=""/></div>
<map name="fb__eeprom_8c_a53d6293cbd69348099446f41c12943a3_cgraph" id="fb__eeprom_8c_a53d6293cbd69348099446f41c12943a3_cgraph">
<area shape="rect" id="node3" href="msg__queue_8h.html#aadc5609c7a2263c8cae4ab0d8eae7c4d" title="Allocate a new message." alt="" coords="207,5,284,35"/><area shape="rect" id="node7" href="msg__queue_8h.html#af35d846267d1aaaf1df04c8bff03047e" title="Add a new message to the message queue." alt="" coords="200,59,291,88"/><area shape="rect" id="node9" href="fb__eeprom_8c.html#ac92e88b86efd0e0e32beaee667bfc226" title="Start to write the first byte to eeprom." alt="" coords="185,112,305,141"/><area shape="rect" id="node5" href="msg__queue_8h.html#aa3b6fa424df78c0dbbbaa16a7dd32acb" title="Allocate space for a message and return a pointer to it." alt="" coords="356,5,436,35"/></map>
<!-- endSectionContent --></div>
</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_a53d6293cbd69348099446f41c12943a3_icgraph.png" border="0" usemap="#fb__eeprom_8c_a53d6293cbd69348099446f41c12943a3_icgraph" alt=""/></div>
<map name="fb__eeprom_8c_a53d6293cbd69348099446f41c12943a3_icgraph" id="fb__eeprom_8c_a53d6293cbd69348099446f41c12943a3_icgraph">
<area shape="rect" id="node3" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf" title="Write recieved data to the eeprom." alt="" coords="211,5,339,35"/><area shape="rect" id="node5" href="fb__prot_8c.html#ac3b30c7591e51974ab895440929395c6" title="Set the received address as our new device address." alt="" coords="185,59,364,88"/><area shape="rect" id="node7" href="fb__relais__app_8c.html#aac9e4f65925a5a959cb5df9ed091b3b7" title="Switch the objects to state in portValue and save value to eeprom if necessary." alt="" coords="220,112,329,141"/><area shape="rect" id="node9" href="fb__relais__app_8c.html#a1f6d9eb16dbc08dfcfac5f8ceb8d7f40" title="processOutputs" alt="" coords="420,85,543,115"/><area shape="rect" id="node13" href="fb__relais__app_8c.html#aabc97de0ba2150af0af7d2ddb8293824" title="Function is called when microcontroller gets power or if the application must be restarted." alt="" coords="415,139,548,168"/><area shape="rect" id="node11" href="fb__relais__app_8c.html#a30773cfc4105728c9628fca36c8c7c20" title="Function is called if A_GroupValue_Write is received." alt="" coords="599,85,711,115"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<a class="anchor" id="a6ab1e3cc3c300d12592e39648da8c022"></a><!-- doxytag: member="fb_eeprom.c::prog_ee" ref="a6ab1e3cc3c300d12592e39648da8c022" args="(uint16_t addr, uint8_t dat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void prog_ee </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>dat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Store on byte on eeprom. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Adress in eeprom to save data </td></tr>
    <tr><td class="paramname">dat</td><td>Data to store </td></tr>
  </table>
  </dd>
</dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>function will be removed, stops working on ATMega168p </dd></dl>

</div>
</div>
<a class="anchor" id="ac92e88b86efd0e0e32beaee667bfc226"></a><!-- doxytag: member="fb_eeprom.c::trigger_eeprom" ref="ac92e88b86efd0e0e32beaee667bfc226" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void trigger_eeprom </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start to write the first byte to eeprom. </p>
<p>The rest of the data is written to the eeprom with the ISR EE_RDY_vect. </p>

<p>References <a class="el" href="structeeprom__cmds.html#adb77e1db3eb6f533394c629782e42bf9">eeprom_cmds::addr</a>, <a class="el" href="structeeprom__cmds.html#a3cc13b5e43a08b530caca0852f27627f">eeprom_cmds::data</a>, <a class="el" href="structmsg.html#a4d5d84257dfd217679a22a7d2ff9dd6f">msg::data</a>, <a class="el" href="freebus-atmega168_8h.html#ae66cebcc81aa5562902071493085f86b">ENABLE_EEPROM_READY_INT</a>, <a class="el" href="msg__queue_8h.html#a962c15ff199e164f9cd3a9f88cd7bd27a6c75ab039b76579129016c6e8375945f">MSG_SENDING</a>, <a class="el" href="structeeprom__cmds.html#aa19fca354e30ba3a8a2f0193b69f6874">eeprom_cmds::offset</a>, and <a class="el" href="structmsg.html#a5be0cab05503423ed78791fa2e169dae">msg::state</a>.</p>

<p>Referenced by <a class="el" href="fb__eeprom_8c.html#a53d6293cbd69348099446f41c12943a3">mem_WriteBlock()</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="fb__eeprom_8c_ac92e88b86efd0e0e32beaee667bfc226_icgraph.png" border="0" usemap="#fb__eeprom_8c_ac92e88b86efd0e0e32beaee667bfc226_icgraph" alt=""/></div>
<map name="fb__eeprom_8c_ac92e88b86efd0e0e32beaee667bfc226_icgraph" id="fb__eeprom_8c_ac92e88b86efd0e0e32beaee667bfc226_icgraph">
<area shape="rect" id="node3" href="fb__eeprom_8c.html#a53d6293cbd69348099446f41c12943a3" title="Write data to the eeprom cache and trigger background process to write eeprom cache to real eeprom..." alt="" coords="177,59,305,88"/><area shape="rect" id="node5" href="fb__prot_8c.html#afae8acdc71d1ebff494c621459c097cf" title="Write recieved data to the eeprom." alt="" coords="381,5,509,35"/><area shape="rect" id="node7" href="fb__prot_8c.html#ac3b30c7591e51974ab895440929395c6" title="Set the received address as our new device address." alt="" coords="356,59,535,88"/><area shape="rect" id="node9" href="fb__relais__app_8c.html#aac9e4f65925a5a959cb5df9ed091b3b7" title="Switch the objects to state in portValue and save value to eeprom if necessary." alt="" coords="391,112,500,141"/><area shape="rect" id="node11" href="fb__relais__app_8c.html#a1f6d9eb16dbc08dfcfac5f8ceb8d7f40" title="processOutputs" alt="" coords="591,85,713,115"/><area shape="rect" id="node15" href="fb__relais__app_8c.html#aabc97de0ba2150af0af7d2ddb8293824" title="Function is called when microcontroller gets power or if the application must be restarted." alt="" coords="585,139,719,168"/><area shape="rect" id="node13" href="fb__relais__app_8c.html#a30773cfc4105728c9628fca36c8c7c20" title="Function is called if A_GroupValue_Write is received." alt="" coords="769,85,881,115"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab39ebd5d0ee54f5e9d3a406a52e6f1df"></a><!-- doxytag: member="fb_eeprom.c::eeprom_msg" ref="ab39ebd5d0ee54f5e9d3a406a52e6f1df" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmsg.html">msg</a>* <a class="el" href="fb__eeprom_8c.html#ab39ebd5d0ee54f5e9d3a406a52e6f1df">eeprom_msg</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>EEprom msg queue. </p>

</div>
</div>
<a class="anchor" id="a8b54a9207abfa04fdd10537033a94a37"></a><!-- doxytag: member="fb_eeprom.c::eeprom_NodeParam" ref="a8b54a9207abfa04fdd10537033a94a37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* <a class="el" href="fb__eeprom_8c.html#a8b54a9207abfa04fdd10537033a94a37">eeprom_NodeParam</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>parameter structure (pointer) </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c.html#a9ff2e645d89f0b31c6497311754a69be">eeprom_GetBase()</a>, <a class="el" href="fb__eeprom_8c.html#aef320e016dbb25dac76482345f2ce495">eeprom_Init()</a>, <a class="el" href="fb__eeprom_8c.html#a96f365c9a61f6dd9b856c7da3d6fefde">eeprom_ParamSetDefault()</a>, <a class="el" href="fb__eeprom_8c.html#a55d6c1613e8277e1d8d3d9187b773c3a">mem_ReadByte()</a>, and <a class="el" href="fb__eeprom_8c.html#a53d6293cbd69348099446f41c12943a3">mem_WriteBlock()</a>.</p>

</div>
</div>
<a class="anchor" id="ac361d05f7daac2a71b7f7d881c5e1663"></a><!-- doxytag: member="fb_eeprom.c::eeprom_NodeParamLen" ref="ac361d05f7daac2a71b7f7d881c5e1663" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="fb__eeprom_8c.html#ac361d05f7daac2a71b7f7d881c5e1663">eeprom_NodeParamLen</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>length of the paramater structure </p>

<p>Referenced by <a class="el" href="fb__eeprom_8c.html#aef320e016dbb25dac76482345f2ce495">eeprom_Init()</a>, and <a class="el" href="fb__eeprom_8c.html#a96f365c9a61f6dd9b856c7da3d6fefde">eeprom_ParamSetDefault()</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Mar 7 2011 10:08:41 for FreeBusAVR by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
